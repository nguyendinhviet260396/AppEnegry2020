{"ast":null,"code":"import { ext } from '@antv/matrix-util';\nimport { registerAnimation } from '@antv/g2';\n\nfunction funnelScaleInY(shape, animateCfg) {\n  var _a = animateCfg || {},\n      _b = _a.duration,\n      duration = _b === void 0 ? 200 : _b,\n      delay = _a.delay,\n      easing = _a.easing,\n      callback = _a.callback,\n      reverse = _a.reverse;\n\n  var bbox = shape.getBBox();\n  var originX = (bbox.minX + bbox.maxX) / 2;\n  var originY = reverse ? bbox.maxY : bbox.minY;\n  var clip = shape.setClip({\n    type: 'rect',\n    attrs: {\n      x: bbox.x,\n      y: bbox.y,\n      width: bbox.width,\n      height: bbox.height\n    }\n  });\n  var clipTargetAttrs = {\n    matrix: [1, 0, 0, 0, 1, 0, 0, 0, 1]\n  };\n  clip.setMatrix(ext.transform(clip.getMatrix(), [['t', -originX, -originY], ['s', 1, 0], ['t', originX, originY]]));\n  var shapeTargetAttrs = {\n    fillOpacity: shape.attr('fillOpacity'),\n    strokeOpacity: shape.attr('strokeOpacity'),\n    opacity: shape.attr('opacity')\n  };\n  shape.attr({\n    fillOpacity: 0,\n    strokeOpacity: 0,\n    opacity: 0\n  });\n  clip.animate(clipTargetAttrs, {\n    duration: 200,\n    easing: easing,\n    callback: function () {\n      shape.setClip(null);\n      clip.remove();\n    },\n    delay: delay\n  });\n  shape.animate(shapeTargetAttrs, {\n    duration: duration,\n    easing: easing,\n    delay: delay\n  });\n  callback && setTimeout(function () {\n    return callback(shape);\n  }, duration + delay);\n}\n\nfunnelScaleInY.animationName = 'funnelScaleInY';\nregisterAnimation('funnelScaleInY', funnelScaleInY);","map":{"version":3,"sources":["../../../../src/plots/funnel/animation/funnel-scale-in-y.ts"],"names":[],"mappings":"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","sourcesContent":["import { ext } from '@antv/matrix-util';\nimport { registerAnimation } from '@antv/g2';\n\nfunction funnelScaleInY(shape, animateCfg) {\n  const { duration = 200, delay, easing, callback, reverse } = animateCfg || {};\n\n  const bbox = shape.getBBox();\n  const originX = (bbox.minX + bbox.maxX) / 2;\n  const originY = reverse ? bbox.maxY : bbox.minY;\n\n  const clip = shape.setClip({\n    type: 'rect',\n    attrs: {\n      x: bbox.x,\n      y: bbox.y,\n      width: bbox.width,\n      height: bbox.height,\n    },\n  });\n  const clipTargetAttrs = {\n    matrix: [1, 0, 0, 0, 1, 0, 0, 0, 1],\n  };\n  clip.setMatrix(\n    ext.transform(clip.getMatrix(), [\n      ['t', -originX, -originY],\n      ['s', 1, 0],\n      ['t', originX, originY],\n    ])\n  );\n\n  const shapeTargetAttrs = {\n    fillOpacity: shape.attr('fillOpacity'),\n    strokeOpacity: shape.attr('strokeOpacity'),\n    opacity: shape.attr('opacity'),\n  };\n  shape.attr({\n    fillOpacity: 0,\n    strokeOpacity: 0,\n    opacity: 0,\n  });\n\n  clip.animate(clipTargetAttrs, {\n    duration: 200,\n    easing,\n    callback() {\n      shape.setClip(null);\n      clip.remove();\n    },\n    delay,\n  });\n\n  shape.animate(shapeTargetAttrs, { duration, easing, delay });\n\n  callback && setTimeout(() => callback(shape), duration + delay);\n}\n\nfunnelScaleInY.animationName = 'funnelScaleInY';\nregisterAnimation('funnelScaleInY', funnelScaleInY);\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}