{"ast":null,"code":"import { __extends } from \"tslib\";\nimport { isType } from '@antv/util';\nimport StatisticHtml from '../../../components/statistic';\nimport { getTemplate } from './statistic-template';\n\nvar RingStatistic =\n/** @class */\nfunction (_super) {\n  __extends(RingStatistic, _super);\n\n  function RingStatistic(cfg) {\n    var _this = _super.call(this, cfg) || this;\n\n    _this.view = cfg.view;\n    _this.plot = cfg.plot;\n    _this.statisticClass = cfg.statisticClass;\n\n    _this.adjustOptions();\n\n    return _this;\n  }\n  /** 中心文本显示 */\n\n\n  RingStatistic.prototype.getTotalHtmlString = function () {\n    var statisticContainer = document.createElement('div');\n    var _a = this.plot.options,\n        _b = _a.value,\n        value = _b === void 0 ? 0 : _b,\n        statistic = _a.statistic;\n\n    if (statistic && !statistic.visible) {\n      return statisticContainer;\n    }\n\n    var htmlContent = this.options.htmlContent(value);\n\n    if (isType(htmlContent, 'HTMLDivElement')) {\n      statisticContainer.appendChild(htmlContent);\n    } else {\n      statisticContainer.innerHTML = getTemplate(htmlContent, this.statisticClass);\n    }\n\n    return statisticContainer;\n  };\n\n  RingStatistic.prototype.adjustOptions = function () {\n    this.html = this.getTotalHtmlString();\n    var _a = this.view.coordinateBBox,\n        minX = _a.minX,\n        minY = _a.minY,\n        width = _a.width,\n        height = _a.height;\n    this.x = minX + width / 2;\n    this.y = minY + height / 2;\n  };\n\n  return RingStatistic;\n}(StatisticHtml);\n\nexport default RingStatistic;","map":{"version":3,"sources":["../../../../src/plots/liquid/component/liquid-statistic.ts"],"names":[],"mappings":";AAAA,SAAS,MAAT,QAAuB,YAAvB;AAEA,OAAO,aAAP,MAA8C,+BAA9C;AAEA,SAAS,WAAT,QAA4B,sBAA5B;;AAOA,IAAA,aAAA;AAAA;AAAA,UAAA,MAAA,EAAA;AAA2C,EAAA,SAAA,CAAA,aAAA,EAAA,MAAA,CAAA;;AAMzC,WAAA,aAAA,CAAY,GAAZ,EAA+B;AAA/B,QAAA,KAAA,GACE,MAAA,CAAA,IAAA,CAAA,IAAA,EAAM,GAAN,KAAU,IADZ;;AAEE,IAAA,KAAI,CAAC,IAAL,GAAY,GAAG,CAAC,IAAhB;AACA,IAAA,KAAI,CAAC,IAAL,GAAY,GAAG,CAAC,IAAhB;AACA,IAAA,KAAI,CAAC,cAAL,GAAsB,GAAG,CAAC,cAA1B;;AACA,IAAA,KAAI,CAAC,aAAL;;;AACD;AAED;;;AACU,EAAA,aAAA,CAAA,SAAA,CAAA,kBAAA,GAAV,YAAA;AACE,QAAM,kBAAkB,GAAG,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA3B;AACM,QAAA,EAAA,GAA2B,KAAK,IAAL,CAAU,OAArC;AAAA,QAAE,EAAA,GAAA,EAAA,CAAA,KAAF;AAAA,QAAE,KAAK,GAAA,EAAA,KAAA,KAAA,CAAA,GAAG,CAAH,GAAI,EAAX;AAAA,QAAa,SAAS,GAAA,EAAA,CAAA,SAAtB;;AACN,QAAI,SAAS,IAAI,CAAC,SAAS,CAAC,OAA5B,EAAqC;AACnC,aAAO,kBAAP;AACD;;AACD,QAAM,WAAW,GAAG,KAAK,OAAL,CAAa,WAAb,CAAyB,KAAzB,CAApB;;AACA,QAAI,MAAM,CAAC,WAAD,EAAc,gBAAd,CAAV,EAA2C;AACzC,MAAA,kBAAkB,CAAC,WAAnB,CAA+B,WAA/B;AACD,KAFD,MAEO;AACL,MAAA,kBAAkB,CAAC,SAAnB,GAA+B,WAAW,CAAC,WAAD,EAAwB,KAAK,cAA7B,CAA1C;AACD;;AAED,WAAO,kBAAP;AACD,GAdS;;AAgBA,EAAA,aAAA,CAAA,SAAA,CAAA,aAAA,GAAV,YAAA;AACE,SAAK,IAAL,GAAY,KAAK,kBAAL,EAAZ;AACM,QAAA,EAAA,GAAgC,KAAK,IAAL,CAAU,cAA1C;AAAA,QAAE,IAAI,GAAA,EAAA,CAAA,IAAN;AAAA,QAAQ,IAAI,GAAA,EAAA,CAAA,IAAZ;AAAA,QAAc,KAAK,GAAA,EAAA,CAAA,KAAnB;AAAA,QAAqB,MAAM,GAAA,EAAA,CAAA,MAA3B;AACN,SAAK,CAAL,GAAS,IAAI,GAAG,KAAK,GAAG,CAAxB;AACA,SAAK,CAAL,GAAS,IAAI,GAAG,MAAM,GAAG,CAAzB;AACD,GALS;;AAMZ,SAAA,aAAA;AAAC,CArCD,CAA2C,aAA3C,CAAA","sourcesContent":["import { isType } from '@antv/util';\nimport { View } from '../../../dependents';\nimport StatisticHtml, { IStatisticHtml } from '../../../components/statistic';\nimport Liquid, { LiquidViewConfig } from '../layer';\nimport { getTemplate } from './statistic-template';\n\ninterface IRingStatistic extends IStatisticHtml {\n  view: View;\n  plot: any;\n}\n\nexport default class RingStatistic extends StatisticHtml {\n  protected view: View;\n  protected plot: Liquid;\n  protected statisticClass: string;\n  protected options: LiquidViewConfig['statistic'];\n\n  constructor(cfg: IRingStatistic) {\n    super(cfg);\n    this.view = cfg.view;\n    this.plot = cfg.plot;\n    this.statisticClass = cfg.statisticClass;\n    this.adjustOptions();\n  }\n\n  /** 中心文本显示 */\n  protected getTotalHtmlString(): HTMLDivElement {\n    const statisticContainer = document.createElement('div');\n    const { value = 0, statistic } = this.plot.options;\n    if (statistic && !statistic.visible) {\n      return statisticContainer;\n    }\n    const htmlContent = this.options.htmlContent(value);\n    if (isType(htmlContent, 'HTMLDivElement')) {\n      statisticContainer.appendChild(htmlContent as HTMLDivElement);\n    } else {\n      statisticContainer.innerHTML = getTemplate(htmlContent as string, this.statisticClass);\n    }\n\n    return statisticContainer;\n  }\n\n  protected adjustOptions() {\n    this.html = this.getTotalHtmlString();\n    const { minX, minY, width, height } = this.view.coordinateBBox;\n    this.x = minX + width / 2;\n    this.y = minY + height / 2;\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}