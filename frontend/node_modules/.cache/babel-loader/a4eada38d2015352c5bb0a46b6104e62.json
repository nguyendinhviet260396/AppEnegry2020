{"ast":null,"code":"/**\n * @file 播放轴组件按钮\n * @author blackganglion\n */\nimport { __extends } from \"tslib\";\nimport { deepMix } from '@antv/util';\nimport BaseComponent from '../base';\n\nvar Button =\n/** @class */\nfunction (_super) {\n  __extends(Button, _super);\n\n  function Button(cfg) {\n    return _super.call(this, deepMix({}, cfg)) || this;\n  }\n\n  Button.prototype.renderInner = function (group) {\n    var _this = this;\n\n    this.initElement(group);\n    this.updateElement();\n    this.renderMarker();\n    group.off('click');\n    group.on('click', function () {\n      _this.emit('click');\n    });\n  };\n\n  Button.prototype.destroy = function () {\n    this.group.off();\n\n    _super.prototype.destroy.call(this);\n  };\n\n  Button.prototype.initElement = function (group) {\n    this.circle = group.addShape('circle', {\n      attrs: {\n        x: this.config.x,\n        y: this.config.y,\n        r: this.config.r,\n        fill: '#607889'\n      }\n    });\n    this.startMarker = group.addShape('path', {\n      attrs: {\n        path: this.getStartMarkerPath(),\n        fill: '#ffffff'\n      }\n    });\n    this.pauseGroupMarker = group.addGroup();\n    var width = 1 / 4 * this.config.r;\n    var height = 0.5 * this.config.r * Math.sqrt(3);\n    this.pauseLeftMarker = this.pauseGroupMarker.addShape('rect', {\n      attrs: {\n        x: this.config.x - (1 / 4 + 1 / 8) * this.config.r,\n        y: this.config.y - height / 2,\n        width: width,\n        height: height,\n        fill: '#ffffff'\n      }\n    });\n    this.pauseRightMarker = this.pauseGroupMarker.addShape('rect', {\n      attrs: {\n        x: this.config.x + 1 / 8 * this.config.r,\n        y: this.config.y - height / 2,\n        width: width,\n        height: height,\n        fill: '#ffffff'\n      }\n    });\n  };\n\n  Button.prototype.updateElement = function () {\n    this.circle.attr('x', this.config.x);\n    this.circle.attr('y', this.config.y);\n    this.circle.attr('r', this.config.r);\n    this.startMarker.attr('path', this.getStartMarkerPath());\n    var width = 1 / 4 * this.config.r;\n    var height = 0.5 * this.config.r * Math.sqrt(3);\n    this.pauseLeftMarker.attr('x', this.config.x - (1 / 4 + 1 / 8) * this.config.r);\n    this.pauseLeftMarker.attr('y', this.config.y - height / 2);\n    this.pauseLeftMarker.attr('width', width);\n    this.pauseLeftMarker.attr('height', height);\n    this.pauseRightMarker.attr('x', this.config.x + 1 / 8 * this.config.r);\n    this.pauseRightMarker.attr('y', this.config.y - height / 2);\n    this.pauseRightMarker.attr('width', width);\n    this.pauseRightMarker.attr('height', height);\n  };\n\n  Button.prototype.renderMarker = function () {\n    if (this.config.isPlay) {\n      this.startMarker.hide();\n      this.pauseGroupMarker.show();\n    } else {\n      this.startMarker.show();\n      this.pauseGroupMarker.hide();\n    }\n  };\n  /** 获取播放键 marker path */\n\n\n  Button.prototype.getStartMarkerPath = function () {\n    var sideLength = 0.5 * this.config.r * Math.sqrt(3);\n    return [['M', this.config.x - sideLength / Math.sqrt(3) / 2, this.config.y - sideLength / 2], ['L', this.config.x + sideLength / Math.sqrt(3), this.config.y], ['L', this.config.x - sideLength / Math.sqrt(3) / 2, this.config.y + sideLength / 2]];\n  };\n\n  return Button;\n}(BaseComponent);\n\nexport default Button;","map":{"version":3,"sources":["../../../src/components/timeline/button.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @file 播放轴组件按钮\n * @author blackganglion\n */\n\nimport { IShape, IGroup } from '@antv/g-base';\nimport { deepMix } from '@antv/util';\nimport BaseComponent, { BaseComponentConfig } from '../base';\n\n/** 播放按钮配置 */\ninterface ButtonCfg extends BaseComponentConfig {\n  /** 按钮位置数据 */\n  readonly x: number;\n  readonly y: number;\n  readonly r: number;\n  readonly isPlay: boolean;\n}\n\nexport default class Button extends BaseComponent<ButtonCfg> {\n  /** 圆点 */\n  private circle: IShape;\n  /** 开始 marker */\n  private startMarker: IShape;\n  /** 暂停 marker */\n  private pauseGroupMarker: IGroup;\n  private pauseLeftMarker: IShape;\n  private pauseRightMarker: IShape;\n\n  constructor(cfg: ButtonCfg) {\n    super(deepMix({}, cfg));\n  }\n\n  protected renderInner(group: IGroup) {\n    this.initElement(group);\n    this.updateElement();\n    this.renderMarker();\n\n    group.off('click');\n    group.on('click', () => {\n      this.emit('click');\n    });\n  }\n\n  public destroy() {\n    this.group.off();\n    super.destroy();\n  }\n\n  private initElement(group: IGroup) {\n    this.circle = group.addShape('circle', {\n      attrs: {\n        x: this.config.x,\n        y: this.config.y,\n        r: this.config.r,\n        fill: '#607889',\n      },\n    });\n\n    this.startMarker = group.addShape('path', {\n      attrs: {\n        path: this.getStartMarkerPath(),\n        fill: '#ffffff',\n      },\n    });\n\n    this.pauseGroupMarker = group.addGroup();\n    const width = (1 / 4) * this.config.r;\n    const height = 0.5 * this.config.r * Math.sqrt(3);\n    this.pauseLeftMarker = this.pauseGroupMarker.addShape('rect', {\n      attrs: {\n        x: this.config.x - (1 / 4 + 1 / 8) * this.config.r,\n        y: this.config.y - height / 2,\n        width,\n        height,\n        fill: '#ffffff',\n      },\n    });\n    this.pauseRightMarker = this.pauseGroupMarker.addShape('rect', {\n      attrs: {\n        x: this.config.x + (1 / 8) * this.config.r,\n        y: this.config.y - height / 2,\n        width,\n        height,\n        fill: '#ffffff',\n      },\n    });\n  }\n\n  private updateElement() {\n    this.circle.attr('x', this.config.x);\n    this.circle.attr('y', this.config.y);\n    this.circle.attr('r', this.config.r);\n\n    this.startMarker.attr('path', this.getStartMarkerPath());\n\n    const width = (1 / 4) * this.config.r;\n    const height = 0.5 * this.config.r * Math.sqrt(3);\n\n    this.pauseLeftMarker.attr('x', this.config.x - (1 / 4 + 1 / 8) * this.config.r);\n    this.pauseLeftMarker.attr('y', this.config.y - height / 2);\n    this.pauseLeftMarker.attr('width', width);\n    this.pauseLeftMarker.attr('height', height);\n\n    this.pauseRightMarker.attr('x', this.config.x + (1 / 8) * this.config.r);\n    this.pauseRightMarker.attr('y', this.config.y - height / 2);\n    this.pauseRightMarker.attr('width', width);\n    this.pauseRightMarker.attr('height', height);\n  }\n\n  private renderMarker() {\n    if (this.config.isPlay) {\n      this.startMarker.hide();\n      this.pauseGroupMarker.show();\n    } else {\n      this.startMarker.show();\n      this.pauseGroupMarker.hide();\n    }\n  }\n\n  /** 获取播放键 marker path */\n  private getStartMarkerPath() {\n    const sideLength = 0.5 * this.config.r * Math.sqrt(3);\n    return [\n      ['M', this.config.x - sideLength / Math.sqrt(3) / 2, this.config.y - sideLength / 2],\n      ['L', this.config.x + sideLength / Math.sqrt(3), this.config.y],\n      ['L', this.config.x - sideLength / Math.sqrt(3) / 2, this.config.y + sideLength / 2],\n    ];\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}