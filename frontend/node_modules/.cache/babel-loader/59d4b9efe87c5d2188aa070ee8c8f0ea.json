{"ast":null,"code":"import React, { useEffect } from 'react';\nimport G6 from '@antv/g6/es';\nimport { ErrorBoundary } from '../base';\nimport { getGraphSize, processMinimap } from './util';\nimport useGraph from '../hooks/useGraph';\nvar defaultStateStyles = {\n  hover: {\n    stroke: '#1890ff',\n    lineWidth: 2\n  }\n};\nvar defaultNodeSize = [120, 40];\nvar defaultNodeStyle = {\n  stroke: '#40a9ff'\n};\nvar defaultNodeAnchorPoints = [[0.5, 0], [0.5, 1]];\nvar defaultEdgeStyle = {\n  stroke: '#91d5ff',\n  endArrow: {\n    path: G6.Arrow.vee(10, 10),\n    fill: '#91d5ff'\n  }\n};\nvar defaultLayout = {\n  type: 'dagre',\n  rankdir: 'TB',\n  nodesepFunc: function nodesepFunc(d) {\n    return 0;\n  },\n  ranksepFunc: function ranksepFunc(d) {\n    return 0;\n  },\n  controlPoints: true\n};\nvar defaultLabelCfg = {\n  style: {\n    fill: '#000',\n    fontSize: 12\n  }\n};\nvar graph;\n\nvar DagreGraph = function DagreGraph(_ref) {\n  var data = _ref.data,\n      className = _ref.className,\n      style = _ref.style,\n      width = _ref.width,\n      height = _ref.height,\n      _ref$nodeType = _ref.nodeType,\n      nodeType = _ref$nodeType === void 0 ? 'modelRect' : _ref$nodeType,\n      _ref$edgeType = _ref.edgeType,\n      edgeType = _ref$edgeType === void 0 ? 'polyline' : _ref$edgeType,\n      _ref$behaviors = _ref.behaviors,\n      behaviors = _ref$behaviors === void 0 ? ['zoom-canvas', 'drag-canvas'] : _ref$behaviors,\n      _ref$nodeSize = _ref.nodeSize,\n      nodeSize = _ref$nodeSize === void 0 ? defaultNodeSize : _ref$nodeSize,\n      _ref$nodeLabelCfg = _ref.nodeLabelCfg,\n      nodeLabelCfg = _ref$nodeLabelCfg === void 0 ? defaultLabelCfg : _ref$nodeLabelCfg,\n      _ref$edgeLabelCfg = _ref.edgeLabelCfg,\n      edgeLabelCfg = _ref$edgeLabelCfg === void 0 ? defaultLabelCfg : _ref$edgeLabelCfg,\n      _ref$nodeAnchorPoints = _ref.nodeAnchorPoints,\n      nodeAnchorPoints = _ref$nodeAnchorPoints === void 0 ? defaultNodeAnchorPoints : _ref$nodeAnchorPoints,\n      _ref$layout = _ref.layout,\n      layout = _ref$layout === void 0 ? defaultLayout : _ref$layout,\n      minimapCfg = _ref.minimapCfg,\n      _ref$nodeStyle = _ref.nodeStyle,\n      nodeStyle = _ref$nodeStyle === void 0 ? defaultNodeStyle : _ref$nodeStyle,\n      _ref$edgeStyle = _ref.edgeStyle,\n      edgeStyle = _ref$edgeStyle === void 0 ? defaultEdgeStyle : _ref$edgeStyle,\n      _ref$nodeStateStyles = _ref.nodeStateStyles,\n      nodeStateStyles = _ref$nodeStateStyles === void 0 ? defaultStateStyles : _ref$nodeStateStyles,\n      _ref$edgeStateStyles = _ref.edgeStateStyles,\n      edgeStateStyles = _ref$edgeStateStyles === void 0 ? defaultStateStyles : _ref$edgeStateStyles,\n      handleEdgeClick = _ref.handleEdgeClick,\n      handleEdgeHover = _ref.handleEdgeHover,\n      handleEdgeUnHover = _ref.handleEdgeUnHover,\n      handleNodeClick = _ref.handleNodeClick,\n      handleNodeHover = _ref.handleNodeHover,\n      handleNodeUnHover = _ref.handleNodeUnHover,\n      handleCanvasClick = _ref.handleCanvasClick,\n      graphRef = _ref.graphRef;\n  var props = {\n    data: data,\n    className: className,\n    style: style,\n    width: width,\n    height: height,\n    nodeType: nodeType,\n    edgeType: edgeType,\n    behaviors: behaviors,\n    nodeSize: nodeSize,\n    nodeLabelCfg: nodeLabelCfg,\n    edgeLabelCfg: edgeLabelCfg,\n    nodeAnchorPoints: nodeAnchorPoints,\n    layout: layout,\n    minimapCfg: minimapCfg,\n    nodeStyle: nodeStyle,\n    edgeStyle: edgeStyle,\n    nodeStateStyles: nodeStateStyles,\n    edgeStateStyles: edgeStateStyles,\n    handleEdgeClick: handleEdgeClick,\n    handleEdgeHover: handleEdgeHover,\n    handleEdgeUnHover: handleEdgeUnHover,\n    handleNodeClick: handleNodeClick,\n    handleNodeHover: handleNodeHover,\n    handleNodeUnHover: handleNodeUnHover,\n    handleCanvasClick: handleCanvasClick,\n    graphRef: graphRef\n  };\n  var container = React.useRef(null);\n  useGraph(graph, props, container);\n  useEffect(function () {\n    var graphSize = getGraphSize(width, height, container);\n\n    if (!graph || graph.destroyed) {\n      graph = new G6.Graph({\n        container: container.current,\n        width: graphSize[0],\n        height: graphSize[1],\n        modes: {\n          default: behaviors\n        },\n        defaultNode: {\n          type: nodeType,\n          size: nodeSize,\n          style: nodeStyle,\n          anchorPoints: nodeAnchorPoints,\n          labelCfg: nodeLabelCfg\n        },\n        defaultEdge: {\n          type: edgeType,\n          style: edgeStyle,\n          labelCfg: edgeLabelCfg\n        },\n        nodeStateStyles: nodeStateStyles,\n        edgeStateStyles: edgeStateStyles,\n        layout: layout\n      });\n\n      if (graphRef) {\n        graphRef.current = graph;\n      }\n    }\n\n    processMinimap(minimapCfg, graph);\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n    graph.on('edge:mouseenter', function (evt) {\n      var item = evt.item;\n      graph.setItemState(item, 'hover', true);\n\n      if (handleEdgeHover) {\n        handleEdgeHover(item, graph);\n      }\n    });\n    graph.on('node:mouseenter', function (evt) {\n      var item = evt.item;\n      graph.setItemState(item, 'hover', false);\n\n      if (handleNodeHover) {\n        handleNodeHover(item, graph);\n      }\n    });\n    graph.on('edge:mouseleave', function (evt) {\n      var item = evt.item;\n      graph.setItemState(item, 'hover', false);\n\n      if (handleEdgeUnHover) {\n        handleEdgeUnHover(item, graph);\n      }\n    });\n    graph.on('node:mouseleave', function (evt) {\n      var item = evt.item;\n      graph.setItemState(item, 'hover', false);\n\n      if (handleNodeUnHover) {\n        handleNodeUnHover(item, graph);\n      }\n    });\n    graph.on('edge:click', function (evt) {\n      var item = evt.item;\n\n      if (handleEdgeClick) {\n        handleEdgeClick(item, graph);\n      }\n    });\n    graph.on('node:click', function (evt) {\n      var item = evt.item;\n\n      if (handleNodeClick) {\n        handleNodeClick(item, graph);\n      }\n    });\n    graph.on('canvas:click', function (evt) {\n      handleCanvasClick && handleCanvasClick(graph);\n    });\n    return function () {\n      return graph.destroy();\n    };\n  }, []);\n  return React.createElement(ErrorBoundary, null, React.createElement(\"div\", {\n    className: className,\n    style: style,\n    ref: container\n  }));\n};\n\nexport default DagreGraph;","map":{"version":3,"sources":["C:/Users/vietn/Desktop/AppEnegry2020/frontend/node_modules/@ant-design/charts/es/graph/dagre.js"],"names":["React","useEffect","G6","ErrorBoundary","getGraphSize","processMinimap","useGraph","defaultStateStyles","hover","stroke","lineWidth","defaultNodeSize","defaultNodeStyle","defaultNodeAnchorPoints","defaultEdgeStyle","endArrow","path","Arrow","vee","fill","defaultLayout","type","rankdir","nodesepFunc","d","ranksepFunc","controlPoints","defaultLabelCfg","style","fontSize","graph","DagreGraph","_ref","data","className","width","height","_ref$nodeType","nodeType","_ref$edgeType","edgeType","_ref$behaviors","behaviors","_ref$nodeSize","nodeSize","_ref$nodeLabelCfg","nodeLabelCfg","_ref$edgeLabelCfg","edgeLabelCfg","_ref$nodeAnchorPoints","nodeAnchorPoints","_ref$layout","layout","minimapCfg","_ref$nodeStyle","nodeStyle","_ref$edgeStyle","edgeStyle","_ref$nodeStateStyles","nodeStateStyles","_ref$edgeStateStyles","edgeStateStyles","handleEdgeClick","handleEdgeHover","handleEdgeUnHover","handleNodeClick","handleNodeHover","handleNodeUnHover","handleCanvasClick","graphRef","props","container","useRef","graphSize","destroyed","Graph","current","modes","default","defaultNode","size","anchorPoints","labelCfg","defaultEdge","render","fitView","on","evt","item","setItemState","destroy","createElement","ref"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,EAAP,MAAe,aAAf;AACA,SAASC,aAAT,QAA8B,SAA9B;AACA,SAASC,YAAT,EAAuBC,cAAvB,QAA6C,QAA7C;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,IAAIC,kBAAkB,GAAG;AACvBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE,SADH;AAELC,IAAAA,SAAS,EAAE;AAFN;AADgB,CAAzB;AAMA,IAAIC,eAAe,GAAG,CAAC,GAAD,EAAM,EAAN,CAAtB;AACA,IAAIC,gBAAgB,GAAG;AACrBH,EAAAA,MAAM,EAAE;AADa,CAAvB;AAGA,IAAII,uBAAuB,GAAG,CAAC,CAAC,GAAD,EAAM,CAAN,CAAD,EAAW,CAAC,GAAD,EAAM,CAAN,CAAX,CAA9B;AACA,IAAIC,gBAAgB,GAAG;AACrBL,EAAAA,MAAM,EAAE,SADa;AAErBM,EAAAA,QAAQ,EAAE;AACRC,IAAAA,IAAI,EAAEd,EAAE,CAACe,KAAH,CAASC,GAAT,CAAa,EAAb,EAAiB,EAAjB,CADE;AAERC,IAAAA,IAAI,EAAE;AAFE;AAFW,CAAvB;AAOA,IAAIC,aAAa,GAAG;AAClBC,EAAAA,IAAI,EAAE,OADY;AAElBC,EAAAA,OAAO,EAAE,IAFS;AAGlBC,EAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBC,CAArB,EAAwB;AACnC,WAAO,CAAP;AACD,GALiB;AAMlBC,EAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBD,CAArB,EAAwB;AACnC,WAAO,CAAP;AACD,GARiB;AASlBE,EAAAA,aAAa,EAAE;AATG,CAApB;AAWA,IAAIC,eAAe,GAAG;AACpBC,EAAAA,KAAK,EAAE;AACLT,IAAAA,IAAI,EAAE,MADD;AAELU,IAAAA,QAAQ,EAAE;AAFL;AADa,CAAtB;AAMA,IAAIC,KAAJ;;AAEA,IAAIC,UAAU,GAAG,SAASA,UAAT,CAAoBC,IAApB,EAA0B;AACzC,MAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;AAAA,MACIC,SAAS,GAAGF,IAAI,CAACE,SADrB;AAAA,MAEIN,KAAK,GAAGI,IAAI,CAACJ,KAFjB;AAAA,MAGIO,KAAK,GAAGH,IAAI,CAACG,KAHjB;AAAA,MAIIC,MAAM,GAAGJ,IAAI,CAACI,MAJlB;AAAA,MAKIC,aAAa,GAAGL,IAAI,CAACM,QALzB;AAAA,MAMIA,QAAQ,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2B,WAA3B,GAAyCA,aANxD;AAAA,MAOIE,aAAa,GAAGP,IAAI,CAACQ,QAPzB;AAAA,MAQIA,QAAQ,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2B,UAA3B,GAAwCA,aARvD;AAAA,MASIE,cAAc,GAAGT,IAAI,CAACU,SAT1B;AAAA,MAUIA,SAAS,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4B,CAAC,aAAD,EAAgB,aAAhB,CAA5B,GAA6DA,cAV7E;AAAA,MAWIE,aAAa,GAAGX,IAAI,CAACY,QAXzB;AAAA,MAYIA,QAAQ,GAAGD,aAAa,KAAK,KAAK,CAAvB,GAA2BhC,eAA3B,GAA6CgC,aAZ5D;AAAA,MAaIE,iBAAiB,GAAGb,IAAI,CAACc,YAb7B;AAAA,MAcIA,YAAY,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+BlB,eAA/B,GAAiDkB,iBAdpE;AAAA,MAeIE,iBAAiB,GAAGf,IAAI,CAACgB,YAf7B;AAAA,MAgBIA,YAAY,GAAGD,iBAAiB,KAAK,KAAK,CAA3B,GAA+BpB,eAA/B,GAAiDoB,iBAhBpE;AAAA,MAiBIE,qBAAqB,GAAGjB,IAAI,CAACkB,gBAjBjC;AAAA,MAkBIA,gBAAgB,GAAGD,qBAAqB,KAAK,KAAK,CAA/B,GAAmCpC,uBAAnC,GAA6DoC,qBAlBpF;AAAA,MAmBIE,WAAW,GAAGnB,IAAI,CAACoB,MAnBvB;AAAA,MAoBIA,MAAM,GAAGD,WAAW,KAAK,KAAK,CAArB,GAAyB/B,aAAzB,GAAyC+B,WApBtD;AAAA,MAqBIE,UAAU,GAAGrB,IAAI,CAACqB,UArBtB;AAAA,MAsBIC,cAAc,GAAGtB,IAAI,CAACuB,SAtB1B;AAAA,MAuBIA,SAAS,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4B1C,gBAA5B,GAA+C0C,cAvB/D;AAAA,MAwBIE,cAAc,GAAGxB,IAAI,CAACyB,SAxB1B;AAAA,MAyBIA,SAAS,GAAGD,cAAc,KAAK,KAAK,CAAxB,GAA4B1C,gBAA5B,GAA+C0C,cAzB/D;AAAA,MA0BIE,oBAAoB,GAAG1B,IAAI,CAAC2B,eA1BhC;AAAA,MA2BIA,eAAe,GAAGD,oBAAoB,KAAK,KAAK,CAA9B,GAAkCnD,kBAAlC,GAAuDmD,oBA3B7E;AAAA,MA4BIE,oBAAoB,GAAG5B,IAAI,CAAC6B,eA5BhC;AAAA,MA6BIA,eAAe,GAAGD,oBAAoB,KAAK,KAAK,CAA9B,GAAkCrD,kBAAlC,GAAuDqD,oBA7B7E;AAAA,MA8BIE,eAAe,GAAG9B,IAAI,CAAC8B,eA9B3B;AAAA,MA+BIC,eAAe,GAAG/B,IAAI,CAAC+B,eA/B3B;AAAA,MAgCIC,iBAAiB,GAAGhC,IAAI,CAACgC,iBAhC7B;AAAA,MAiCIC,eAAe,GAAGjC,IAAI,CAACiC,eAjC3B;AAAA,MAkCIC,eAAe,GAAGlC,IAAI,CAACkC,eAlC3B;AAAA,MAmCIC,iBAAiB,GAAGnC,IAAI,CAACmC,iBAnC7B;AAAA,MAoCIC,iBAAiB,GAAGpC,IAAI,CAACoC,iBApC7B;AAAA,MAqCIC,QAAQ,GAAGrC,IAAI,CAACqC,QArCpB;AAsCA,MAAIC,KAAK,GAAG;AACVrC,IAAAA,IAAI,EAAEA,IADI;AAEVC,IAAAA,SAAS,EAAEA,SAFD;AAGVN,IAAAA,KAAK,EAAEA,KAHG;AAIVO,IAAAA,KAAK,EAAEA,KAJG;AAKVC,IAAAA,MAAM,EAAEA,MALE;AAMVE,IAAAA,QAAQ,EAAEA,QANA;AAOVE,IAAAA,QAAQ,EAAEA,QAPA;AAQVE,IAAAA,SAAS,EAAEA,SARD;AASVE,IAAAA,QAAQ,EAAEA,QATA;AAUVE,IAAAA,YAAY,EAAEA,YAVJ;AAWVE,IAAAA,YAAY,EAAEA,YAXJ;AAYVE,IAAAA,gBAAgB,EAAEA,gBAZR;AAaVE,IAAAA,MAAM,EAAEA,MAbE;AAcVC,IAAAA,UAAU,EAAEA,UAdF;AAeVE,IAAAA,SAAS,EAAEA,SAfD;AAgBVE,IAAAA,SAAS,EAAEA,SAhBD;AAiBVE,IAAAA,eAAe,EAAEA,eAjBP;AAkBVE,IAAAA,eAAe,EAAEA,eAlBP;AAmBVC,IAAAA,eAAe,EAAEA,eAnBP;AAoBVC,IAAAA,eAAe,EAAEA,eApBP;AAqBVC,IAAAA,iBAAiB,EAAEA,iBArBT;AAsBVC,IAAAA,eAAe,EAAEA,eAtBP;AAuBVC,IAAAA,eAAe,EAAEA,eAvBP;AAwBVC,IAAAA,iBAAiB,EAAEA,iBAxBT;AAyBVC,IAAAA,iBAAiB,EAAEA,iBAzBT;AA0BVC,IAAAA,QAAQ,EAAEA;AA1BA,GAAZ;AA4BA,MAAIE,SAAS,GAAGvE,KAAK,CAACwE,MAAN,CAAa,IAAb,CAAhB;AACAlE,EAAAA,QAAQ,CAACwB,KAAD,EAAQwC,KAAR,EAAeC,SAAf,CAAR;AACAtE,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAIwE,SAAS,GAAGrE,YAAY,CAAC+B,KAAD,EAAQC,MAAR,EAAgBmC,SAAhB,CAA5B;;AAEA,QAAI,CAACzC,KAAD,IAAUA,KAAK,CAAC4C,SAApB,EAA+B;AAC7B5C,MAAAA,KAAK,GAAG,IAAI5B,EAAE,CAACyE,KAAP,CAAa;AACnBJ,QAAAA,SAAS,EAAEA,SAAS,CAACK,OADF;AAEnBzC,QAAAA,KAAK,EAAEsC,SAAS,CAAC,CAAD,CAFG;AAGnBrC,QAAAA,MAAM,EAAEqC,SAAS,CAAC,CAAD,CAHE;AAInBI,QAAAA,KAAK,EAAE;AACLC,UAAAA,OAAO,EAAEpC;AADJ,SAJY;AAOnBqC,QAAAA,WAAW,EAAE;AACX1D,UAAAA,IAAI,EAAEiB,QADK;AAEX0C,UAAAA,IAAI,EAAEpC,QAFK;AAGXhB,UAAAA,KAAK,EAAE2B,SAHI;AAIX0B,UAAAA,YAAY,EAAE/B,gBAJH;AAKXgC,UAAAA,QAAQ,EAAEpC;AALC,SAPM;AAcnBqC,QAAAA,WAAW,EAAE;AACX9D,UAAAA,IAAI,EAAEmB,QADK;AAEXZ,UAAAA,KAAK,EAAE6B,SAFI;AAGXyB,UAAAA,QAAQ,EAAElC;AAHC,SAdM;AAmBnBW,QAAAA,eAAe,EAAEA,eAnBE;AAoBnBE,QAAAA,eAAe,EAAEA,eApBE;AAqBnBT,QAAAA,MAAM,EAAEA;AArBW,OAAb,CAAR;;AAwBA,UAAIiB,QAAJ,EAAc;AACZA,QAAAA,QAAQ,CAACO,OAAT,GAAmB9C,KAAnB;AACD;AACF;;AAEDzB,IAAAA,cAAc,CAACgD,UAAD,EAAavB,KAAb,CAAd;AACAA,IAAAA,KAAK,CAACG,IAAN,CAAWA,IAAX;AACAH,IAAAA,KAAK,CAACsD,MAAN;AACAtD,IAAAA,KAAK,CAACuD,OAAN;AACAvD,IAAAA,KAAK,CAACwD,EAAN,CAAS,iBAAT,EAA4B,UAAUC,GAAV,EAAe;AACzC,UAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;AACA1D,MAAAA,KAAK,CAAC2D,YAAN,CAAmBD,IAAnB,EAAyB,OAAzB,EAAkC,IAAlC;;AAEA,UAAIzB,eAAJ,EAAqB;AACnBA,QAAAA,eAAe,CAACyB,IAAD,EAAO1D,KAAP,CAAf;AACD;AACF,KAPD;AAQAA,IAAAA,KAAK,CAACwD,EAAN,CAAS,iBAAT,EAA4B,UAAUC,GAAV,EAAe;AACzC,UAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;AACA1D,MAAAA,KAAK,CAAC2D,YAAN,CAAmBD,IAAnB,EAAyB,OAAzB,EAAkC,KAAlC;;AAEA,UAAItB,eAAJ,EAAqB;AACnBA,QAAAA,eAAe,CAACsB,IAAD,EAAO1D,KAAP,CAAf;AACD;AACF,KAPD;AAQAA,IAAAA,KAAK,CAACwD,EAAN,CAAS,iBAAT,EAA4B,UAAUC,GAAV,EAAe;AACzC,UAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;AACA1D,MAAAA,KAAK,CAAC2D,YAAN,CAAmBD,IAAnB,EAAyB,OAAzB,EAAkC,KAAlC;;AAEA,UAAIxB,iBAAJ,EAAuB;AACrBA,QAAAA,iBAAiB,CAACwB,IAAD,EAAO1D,KAAP,CAAjB;AACD;AACF,KAPD;AAQAA,IAAAA,KAAK,CAACwD,EAAN,CAAS,iBAAT,EAA4B,UAAUC,GAAV,EAAe;AACzC,UAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;AACA1D,MAAAA,KAAK,CAAC2D,YAAN,CAAmBD,IAAnB,EAAyB,OAAzB,EAAkC,KAAlC;;AAEA,UAAIrB,iBAAJ,EAAuB;AACrBA,QAAAA,iBAAiB,CAACqB,IAAD,EAAO1D,KAAP,CAAjB;AACD;AACF,KAPD;AAQAA,IAAAA,KAAK,CAACwD,EAAN,CAAS,YAAT,EAAuB,UAAUC,GAAV,EAAe;AACpC,UAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;;AAEA,UAAI1B,eAAJ,EAAqB;AACnBA,QAAAA,eAAe,CAAC0B,IAAD,EAAO1D,KAAP,CAAf;AACD;AACF,KAND;AAOAA,IAAAA,KAAK,CAACwD,EAAN,CAAS,YAAT,EAAuB,UAAUC,GAAV,EAAe;AACpC,UAAIC,IAAI,GAAGD,GAAG,CAACC,IAAf;;AAEA,UAAIvB,eAAJ,EAAqB;AACnBA,QAAAA,eAAe,CAACuB,IAAD,EAAO1D,KAAP,CAAf;AACD;AACF,KAND;AAOAA,IAAAA,KAAK,CAACwD,EAAN,CAAS,cAAT,EAAyB,UAAUC,GAAV,EAAe;AACtCnB,MAAAA,iBAAiB,IAAIA,iBAAiB,CAACtC,KAAD,CAAtC;AACD,KAFD;AAGA,WAAO,YAAY;AACjB,aAAOA,KAAK,CAAC4D,OAAN,EAAP;AACD,KAFD;AAGD,GAzFQ,EAyFN,EAzFM,CAAT;AA0FA,SAAO1F,KAAK,CAAC2F,aAAN,CAAoBxF,aAApB,EAAmC,IAAnC,EAAyCH,KAAK,CAAC2F,aAAN,CAAoB,KAApB,EAA2B;AACzEzD,IAAAA,SAAS,EAAEA,SAD8D;AAEzEN,IAAAA,KAAK,EAAEA,KAFkE;AAGzEgE,IAAAA,GAAG,EAAErB;AAHoE,GAA3B,CAAzC,CAAP;AAKD,CApKD;;AAsKA,eAAexC,UAAf","sourcesContent":["import React, { useEffect } from 'react';\nimport G6 from '@antv/g6/es';\nimport { ErrorBoundary } from '../base';\nimport { getGraphSize, processMinimap } from './util';\nimport useGraph from '../hooks/useGraph';\nvar defaultStateStyles = {\n  hover: {\n    stroke: '#1890ff',\n    lineWidth: 2\n  }\n};\nvar defaultNodeSize = [120, 40];\nvar defaultNodeStyle = {\n  stroke: '#40a9ff'\n};\nvar defaultNodeAnchorPoints = [[0.5, 0], [0.5, 1]];\nvar defaultEdgeStyle = {\n  stroke: '#91d5ff',\n  endArrow: {\n    path: G6.Arrow.vee(10, 10),\n    fill: '#91d5ff'\n  }\n};\nvar defaultLayout = {\n  type: 'dagre',\n  rankdir: 'TB',\n  nodesepFunc: function nodesepFunc(d) {\n    return 0;\n  },\n  ranksepFunc: function ranksepFunc(d) {\n    return 0;\n  },\n  controlPoints: true\n};\nvar defaultLabelCfg = {\n  style: {\n    fill: '#000',\n    fontSize: 12\n  }\n};\nvar graph;\n\nvar DagreGraph = function DagreGraph(_ref) {\n  var data = _ref.data,\n      className = _ref.className,\n      style = _ref.style,\n      width = _ref.width,\n      height = _ref.height,\n      _ref$nodeType = _ref.nodeType,\n      nodeType = _ref$nodeType === void 0 ? 'modelRect' : _ref$nodeType,\n      _ref$edgeType = _ref.edgeType,\n      edgeType = _ref$edgeType === void 0 ? 'polyline' : _ref$edgeType,\n      _ref$behaviors = _ref.behaviors,\n      behaviors = _ref$behaviors === void 0 ? ['zoom-canvas', 'drag-canvas'] : _ref$behaviors,\n      _ref$nodeSize = _ref.nodeSize,\n      nodeSize = _ref$nodeSize === void 0 ? defaultNodeSize : _ref$nodeSize,\n      _ref$nodeLabelCfg = _ref.nodeLabelCfg,\n      nodeLabelCfg = _ref$nodeLabelCfg === void 0 ? defaultLabelCfg : _ref$nodeLabelCfg,\n      _ref$edgeLabelCfg = _ref.edgeLabelCfg,\n      edgeLabelCfg = _ref$edgeLabelCfg === void 0 ? defaultLabelCfg : _ref$edgeLabelCfg,\n      _ref$nodeAnchorPoints = _ref.nodeAnchorPoints,\n      nodeAnchorPoints = _ref$nodeAnchorPoints === void 0 ? defaultNodeAnchorPoints : _ref$nodeAnchorPoints,\n      _ref$layout = _ref.layout,\n      layout = _ref$layout === void 0 ? defaultLayout : _ref$layout,\n      minimapCfg = _ref.minimapCfg,\n      _ref$nodeStyle = _ref.nodeStyle,\n      nodeStyle = _ref$nodeStyle === void 0 ? defaultNodeStyle : _ref$nodeStyle,\n      _ref$edgeStyle = _ref.edgeStyle,\n      edgeStyle = _ref$edgeStyle === void 0 ? defaultEdgeStyle : _ref$edgeStyle,\n      _ref$nodeStateStyles = _ref.nodeStateStyles,\n      nodeStateStyles = _ref$nodeStateStyles === void 0 ? defaultStateStyles : _ref$nodeStateStyles,\n      _ref$edgeStateStyles = _ref.edgeStateStyles,\n      edgeStateStyles = _ref$edgeStateStyles === void 0 ? defaultStateStyles : _ref$edgeStateStyles,\n      handleEdgeClick = _ref.handleEdgeClick,\n      handleEdgeHover = _ref.handleEdgeHover,\n      handleEdgeUnHover = _ref.handleEdgeUnHover,\n      handleNodeClick = _ref.handleNodeClick,\n      handleNodeHover = _ref.handleNodeHover,\n      handleNodeUnHover = _ref.handleNodeUnHover,\n      handleCanvasClick = _ref.handleCanvasClick,\n      graphRef = _ref.graphRef;\n  var props = {\n    data: data,\n    className: className,\n    style: style,\n    width: width,\n    height: height,\n    nodeType: nodeType,\n    edgeType: edgeType,\n    behaviors: behaviors,\n    nodeSize: nodeSize,\n    nodeLabelCfg: nodeLabelCfg,\n    edgeLabelCfg: edgeLabelCfg,\n    nodeAnchorPoints: nodeAnchorPoints,\n    layout: layout,\n    minimapCfg: minimapCfg,\n    nodeStyle: nodeStyle,\n    edgeStyle: edgeStyle,\n    nodeStateStyles: nodeStateStyles,\n    edgeStateStyles: edgeStateStyles,\n    handleEdgeClick: handleEdgeClick,\n    handleEdgeHover: handleEdgeHover,\n    handleEdgeUnHover: handleEdgeUnHover,\n    handleNodeClick: handleNodeClick,\n    handleNodeHover: handleNodeHover,\n    handleNodeUnHover: handleNodeUnHover,\n    handleCanvasClick: handleCanvasClick,\n    graphRef: graphRef\n  };\n  var container = React.useRef(null);\n  useGraph(graph, props, container);\n  useEffect(function () {\n    var graphSize = getGraphSize(width, height, container);\n\n    if (!graph || graph.destroyed) {\n      graph = new G6.Graph({\n        container: container.current,\n        width: graphSize[0],\n        height: graphSize[1],\n        modes: {\n          default: behaviors\n        },\n        defaultNode: {\n          type: nodeType,\n          size: nodeSize,\n          style: nodeStyle,\n          anchorPoints: nodeAnchorPoints,\n          labelCfg: nodeLabelCfg\n        },\n        defaultEdge: {\n          type: edgeType,\n          style: edgeStyle,\n          labelCfg: edgeLabelCfg\n        },\n        nodeStateStyles: nodeStateStyles,\n        edgeStateStyles: edgeStateStyles,\n        layout: layout\n      });\n\n      if (graphRef) {\n        graphRef.current = graph;\n      }\n    }\n\n    processMinimap(minimapCfg, graph);\n    graph.data(data);\n    graph.render();\n    graph.fitView();\n    graph.on('edge:mouseenter', function (evt) {\n      var item = evt.item;\n      graph.setItemState(item, 'hover', true);\n\n      if (handleEdgeHover) {\n        handleEdgeHover(item, graph);\n      }\n    });\n    graph.on('node:mouseenter', function (evt) {\n      var item = evt.item;\n      graph.setItemState(item, 'hover', false);\n\n      if (handleNodeHover) {\n        handleNodeHover(item, graph);\n      }\n    });\n    graph.on('edge:mouseleave', function (evt) {\n      var item = evt.item;\n      graph.setItemState(item, 'hover', false);\n\n      if (handleEdgeUnHover) {\n        handleEdgeUnHover(item, graph);\n      }\n    });\n    graph.on('node:mouseleave', function (evt) {\n      var item = evt.item;\n      graph.setItemState(item, 'hover', false);\n\n      if (handleNodeUnHover) {\n        handleNodeUnHover(item, graph);\n      }\n    });\n    graph.on('edge:click', function (evt) {\n      var item = evt.item;\n\n      if (handleEdgeClick) {\n        handleEdgeClick(item, graph);\n      }\n    });\n    graph.on('node:click', function (evt) {\n      var item = evt.item;\n\n      if (handleNodeClick) {\n        handleNodeClick(item, graph);\n      }\n    });\n    graph.on('canvas:click', function (evt) {\n      handleCanvasClick && handleCanvasClick(graph);\n    });\n    return function () {\n      return graph.destroy();\n    };\n  }, []);\n  return React.createElement(ErrorBoundary, null, React.createElement(\"div\", {\n    className: className,\n    style: style,\n    ref: container\n  }));\n};\n\nexport default DagreGraph;"]},"metadata":{},"sourceType":"module"}