{"ast":null,"code":"import { __extends } from \"tslib\";\nimport modifyCSS from '@antv/dom-util/lib/modify-css';\nimport createDOM from '@antv/dom-util/lib/create-dom';\nimport isString from '@antv/util/lib/is-string';\nimport insertCss from 'insert-css';\nimport Base from '../base';\ninsertCss(\"\\n  .g6-component-contextmenu {\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    padding: 10px 8px;\\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\\n  }\\n  .g6-contextmenu-ul {\\n    padding: 0;\\n    margin: 0;\\n    list-style: none;\\n  }\\n\\n\");\n\nvar Menu =\n/** @class */\nfunction (_super) {\n  __extends(Menu, _super);\n\n  function Menu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Menu.prototype.getDefaultCfgs = function () {\n    return {\n      offsetX: 6,\n      offsetY: 6,\n      handleMenuClick: undefined,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(graph) {\n        return \"\\n          <ul class='g6-contextmenu-ul'>\\n            <li>\\u83DC\\u5355\\u98791</li>\\n            <li>\\u83DC\\u5355\\u98792</li>\\n          </ul>\\n        \";\n      },\n      shouldBegin: function shouldBegin(e) {\n        return true;\n      },\n      // 菜单隐藏事件\n      onHide: function onHide() {\n        return true;\n      },\n      itemTypes: ['node', 'edge', 'combo']\n    };\n  }; // class-methods-use-this\n\n\n  Menu.prototype.getEvents = function () {\n    return {\n      contextmenu: 'onMenuShow'\n    };\n  };\n\n  Menu.prototype.init = function () {\n    var className = this.get('className');\n    var menu = createDOM(\"<div class=\" + (className || 'g6-component-contextmenu') + \"></div>\");\n    modifyCSS(menu, {\n      position: 'absolute',\n      visibility: 'hidden'\n    });\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    container.appendChild(menu);\n    this.set('menu', menu);\n  };\n\n  Menu.prototype.onMenuShow = function (e) {\n    var self = this;\n    e.preventDefault();\n    e.stopPropagation();\n    if (!e.item) return;\n    var shouldBegin = this.get('shouldBegin');\n    if (!shouldBegin(e)) return;\n    var itemTypes = this.get('itemTypes');\n\n    if (e.item && e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) {\n      self.onMenuHide();\n      return;\n    }\n\n    if (!e.item) {\n      return;\n    }\n\n    var menuDom = this.get('menu');\n    var getContent = this.get('getContent');\n    var menu = getContent(e);\n\n    if (isString(menu)) {\n      menuDom.innerHTML = menu;\n    } else {\n      menuDom.innerHTML = menu.outerHTML;\n    } // 清除之前监听的事件\n\n\n    this.removeMenuEventListener();\n    var handleMenuClick = this.get('handleMenuClick');\n\n    if (handleMenuClick) {\n      var handleMenuClickWrapper = function handleMenuClickWrapper(evt) {\n        handleMenuClick(evt.target, e.item);\n      };\n\n      this.set('handleMenuClickWrapper', handleMenuClickWrapper);\n      menuDom.addEventListener('click', handleMenuClickWrapper);\n    }\n\n    var graph = this.get('graph');\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var bbox = menuDom.getBoundingClientRect();\n    var offsetX = this.get('offsetX') || 0;\n    var offsetY = this.get('offsetY') || 0;\n    var x = e.canvasX + offsetX;\n    var y = e.canvasY + offsetY;\n\n    if (x + bbox.width > width) {\n      x = x - bbox.width - offsetX;\n    }\n\n    if (y + bbox.height > height) {\n      y = y - bbox.height - offsetY;\n    }\n\n    modifyCSS(menuDom, {\n      top: y + \"px\",\n      left: x + \"px\",\n      visibility: 'visible'\n    });\n\n    var handler = function handler(evt) {\n      self.onMenuHide();\n    }; // 如果在页面中其他任意地方进行click, 隐去菜单\n\n\n    document.body.addEventListener('click', handler);\n    this.set('handler', handler);\n  };\n\n  Menu.prototype.removeMenuEventListener = function () {\n    var handleMenuClickWrapper = this.get('handleMenuClickWrapper');\n    var handler = this.get('handler');\n\n    if (handleMenuClickWrapper) {\n      var menuDom = this.get('menu');\n      menuDom.removeEventListener('click', handleMenuClickWrapper);\n      this.set('handleMenuClickWrapper', null);\n    }\n\n    if (handler) {\n      document.body.removeEventListener('click', handler);\n    }\n  };\n\n  Menu.prototype.onMenuHide = function () {\n    var menuDom = this.get('menu');\n\n    if (menuDom) {\n      modifyCSS(menuDom, {\n        visibility: 'hidden'\n      });\n    } // 隐藏菜单后需要移除事件监听\n\n\n    this.removeMenuEventListener();\n  };\n\n  Menu.prototype.destroy = function () {\n    var menu = this.get('menu');\n    this.removeMenuEventListener();\n\n    if (menu) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      container.removeChild(menu);\n    }\n  };\n\n  return Menu;\n}(Base);\n\nexport default Menu;","map":{"version":3,"sources":["C:/Users/vietn/Desktop/AppEnegry2020/frontend/node_modules/@antv/g6/es/plugins/menu/index.js"],"names":["__extends","modifyCSS","createDOM","isString","insertCss","Base","Menu","_super","apply","arguments","prototype","getDefaultCfgs","offsetX","offsetY","handleMenuClick","undefined","getContent","graph","shouldBegin","e","onHide","itemTypes","getEvents","contextmenu","init","className","get","menu","position","visibility","container","appendChild","set","onMenuShow","self","preventDefault","stopPropagation","item","getType","indexOf","onMenuHide","menuDom","innerHTML","outerHTML","removeMenuEventListener","handleMenuClickWrapper","evt","target","addEventListener","width","height","bbox","getBoundingClientRect","x","canvasX","y","canvasY","top","left","handler","document","body","removeEventListener","destroy","removeChild"],"mappings":"AAAA,SAASA,SAAT,QAA0B,OAA1B;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,SAAP,MAAsB,+BAAtB;AACA,OAAOC,QAAP,MAAqB,0BAArB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AACAD,SAAS,CAAC,8VAAD,CAAT;;AAEA,IAAIE,IAAI;AACR;AACA,UAAUC,MAAV,EAAkB;AAChBP,EAAAA,SAAS,CAACM,IAAD,EAAOC,MAAP,CAAT;;AAEA,WAASD,IAAT,GAAgB;AACd,WAAOC,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACC,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAnB,IAAoD,IAA3D;AACD;;AAEDH,EAAAA,IAAI,CAACI,SAAL,CAAeC,cAAf,GAAgC,YAAY;AAC1C,WAAO;AACLC,MAAAA,OAAO,EAAE,CADJ;AAELC,MAAAA,OAAO,EAAE,CAFJ;AAGLC,MAAAA,eAAe,EAAEC,SAHZ;AAIL;AACAC,MAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBC,KAApB,EAA2B;AACrC,eAAO,2JAAP;AACD,OAPI;AAQLC,MAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBC,CAArB,EAAwB;AACnC,eAAO,IAAP;AACD,OAVI;AAWL;AACAC,MAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,eAAO,IAAP;AACD,OAdI;AAeLC,MAAAA,SAAS,EAAE,CAAC,MAAD,EAAS,MAAT,EAAiB,OAAjB;AAfN,KAAP;AAiBD,GAlBD,CAPgB,CAyBb;;;AAGHf,EAAAA,IAAI,CAACI,SAAL,CAAeY,SAAf,GAA2B,YAAY;AACrC,WAAO;AACLC,MAAAA,WAAW,EAAE;AADR,KAAP;AAGD,GAJD;;AAMAjB,EAAAA,IAAI,CAACI,SAAL,CAAec,IAAf,GAAsB,YAAY;AAChC,QAAIC,SAAS,GAAG,KAAKC,GAAL,CAAS,WAAT,CAAhB;AACA,QAAIC,IAAI,GAAGzB,SAAS,CAAC,iBAAiBuB,SAAS,IAAI,0BAA9B,IAA4D,SAA7D,CAApB;AACAxB,IAAAA,SAAS,CAAC0B,IAAD,EAAO;AACdC,MAAAA,QAAQ,EAAE,UADI;AAEdC,MAAAA,UAAU,EAAE;AAFE,KAAP,CAAT;AAIA,QAAIC,SAAS,GAAG,KAAKJ,GAAL,CAAS,WAAT,CAAhB;;AAEA,QAAI,CAACI,SAAL,EAAgB;AACdA,MAAAA,SAAS,GAAG,KAAKJ,GAAL,CAAS,OAAT,EAAkBA,GAAlB,CAAsB,WAAtB,CAAZ;AACD;;AAEDI,IAAAA,SAAS,CAACC,WAAV,CAAsBJ,IAAtB;AACA,SAAKK,GAAL,CAAS,MAAT,EAAiBL,IAAjB;AACD,GAfD;;AAiBArB,EAAAA,IAAI,CAACI,SAAL,CAAeuB,UAAf,GAA4B,UAAUd,CAAV,EAAa;AACvC,QAAIe,IAAI,GAAG,IAAX;AACAf,IAAAA,CAAC,CAACgB,cAAF;AACAhB,IAAAA,CAAC,CAACiB,eAAF;AACA,QAAI,CAACjB,CAAC,CAACkB,IAAP,EAAa;AACb,QAAInB,WAAW,GAAG,KAAKQ,GAAL,CAAS,aAAT,CAAlB;AACA,QAAI,CAACR,WAAW,CAACC,CAAD,CAAhB,EAAqB;AACrB,QAAIE,SAAS,GAAG,KAAKK,GAAL,CAAS,WAAT,CAAhB;;AAEA,QAAIP,CAAC,CAACkB,IAAF,IAAUlB,CAAC,CAACkB,IAAF,CAAOC,OAAjB,IAA4BjB,SAAS,CAACkB,OAAV,CAAkBpB,CAAC,CAACkB,IAAF,CAAOC,OAAP,EAAlB,MAAwC,CAAC,CAAzE,EAA4E;AAC1EJ,MAAAA,IAAI,CAACM,UAAL;AACA;AACD;;AAED,QAAI,CAACrB,CAAC,CAACkB,IAAP,EAAa;AACX;AACD;;AAED,QAAII,OAAO,GAAG,KAAKf,GAAL,CAAS,MAAT,CAAd;AACA,QAAIV,UAAU,GAAG,KAAKU,GAAL,CAAS,YAAT,CAAjB;AACA,QAAIC,IAAI,GAAGX,UAAU,CAACG,CAAD,CAArB;;AAEA,QAAIhB,QAAQ,CAACwB,IAAD,CAAZ,EAAoB;AAClBc,MAAAA,OAAO,CAACC,SAAR,GAAoBf,IAApB;AACD,KAFD,MAEO;AACLc,MAAAA,OAAO,CAACC,SAAR,GAAoBf,IAAI,CAACgB,SAAzB;AACD,KA1BsC,CA0BrC;;;AAGF,SAAKC,uBAAL;AACA,QAAI9B,eAAe,GAAG,KAAKY,GAAL,CAAS,iBAAT,CAAtB;;AAEA,QAAIZ,eAAJ,EAAqB;AACnB,UAAI+B,sBAAsB,GAAG,SAASA,sBAAT,CAAgCC,GAAhC,EAAqC;AAChEhC,QAAAA,eAAe,CAACgC,GAAG,CAACC,MAAL,EAAa5B,CAAC,CAACkB,IAAf,CAAf;AACD,OAFD;;AAIA,WAAKL,GAAL,CAAS,wBAAT,EAAmCa,sBAAnC;AACAJ,MAAAA,OAAO,CAACO,gBAAR,CAAyB,OAAzB,EAAkCH,sBAAlC;AACD;;AAED,QAAI5B,KAAK,GAAG,KAAKS,GAAL,CAAS,OAAT,CAAZ;AACA,QAAIuB,KAAK,GAAGhC,KAAK,CAACS,GAAN,CAAU,OAAV,CAAZ;AACA,QAAIwB,MAAM,GAAGjC,KAAK,CAACS,GAAN,CAAU,QAAV,CAAb;AACA,QAAIyB,IAAI,GAAGV,OAAO,CAACW,qBAAR,EAAX;AACA,QAAIxC,OAAO,GAAG,KAAKc,GAAL,CAAS,SAAT,KAAuB,CAArC;AACA,QAAIb,OAAO,GAAG,KAAKa,GAAL,CAAS,SAAT,KAAuB,CAArC;AACA,QAAI2B,CAAC,GAAGlC,CAAC,CAACmC,OAAF,GAAY1C,OAApB;AACA,QAAI2C,CAAC,GAAGpC,CAAC,CAACqC,OAAF,GAAY3C,OAApB;;AAEA,QAAIwC,CAAC,GAAGF,IAAI,CAACF,KAAT,GAAiBA,KAArB,EAA4B;AAC1BI,MAAAA,CAAC,GAAGA,CAAC,GAAGF,IAAI,CAACF,KAAT,GAAiBrC,OAArB;AACD;;AAED,QAAI2C,CAAC,GAAGJ,IAAI,CAACD,MAAT,GAAkBA,MAAtB,EAA8B;AAC5BK,MAAAA,CAAC,GAAGA,CAAC,GAAGJ,IAAI,CAACD,MAAT,GAAkBrC,OAAtB;AACD;;AAEDZ,IAAAA,SAAS,CAACwC,OAAD,EAAU;AACjBgB,MAAAA,GAAG,EAAEF,CAAC,GAAG,IADQ;AAEjBG,MAAAA,IAAI,EAAEL,CAAC,GAAG,IAFO;AAGjBxB,MAAAA,UAAU,EAAE;AAHK,KAAV,CAAT;;AAMA,QAAI8B,OAAO,GAAG,SAASA,OAAT,CAAiBb,GAAjB,EAAsB;AAClCZ,MAAAA,IAAI,CAACM,UAAL;AACD,KAFD,CAhEuC,CAkEpC;;;AAGHoB,IAAAA,QAAQ,CAACC,IAAT,CAAcb,gBAAd,CAA+B,OAA/B,EAAwCW,OAAxC;AACA,SAAK3B,GAAL,CAAS,SAAT,EAAoB2B,OAApB;AACD,GAvED;;AAyEArD,EAAAA,IAAI,CAACI,SAAL,CAAekC,uBAAf,GAAyC,YAAY;AACnD,QAAIC,sBAAsB,GAAG,KAAKnB,GAAL,CAAS,wBAAT,CAA7B;AACA,QAAIiC,OAAO,GAAG,KAAKjC,GAAL,CAAS,SAAT,CAAd;;AAEA,QAAImB,sBAAJ,EAA4B;AAC1B,UAAIJ,OAAO,GAAG,KAAKf,GAAL,CAAS,MAAT,CAAd;AACAe,MAAAA,OAAO,CAACqB,mBAAR,CAA4B,OAA5B,EAAqCjB,sBAArC;AACA,WAAKb,GAAL,CAAS,wBAAT,EAAmC,IAAnC;AACD;;AAED,QAAI2B,OAAJ,EAAa;AACXC,MAAAA,QAAQ,CAACC,IAAT,CAAcC,mBAAd,CAAkC,OAAlC,EAA2CH,OAA3C;AACD;AACF,GAbD;;AAeArD,EAAAA,IAAI,CAACI,SAAL,CAAe8B,UAAf,GAA4B,YAAY;AACtC,QAAIC,OAAO,GAAG,KAAKf,GAAL,CAAS,MAAT,CAAd;;AAEA,QAAIe,OAAJ,EAAa;AACXxC,MAAAA,SAAS,CAACwC,OAAD,EAAU;AACjBZ,QAAAA,UAAU,EAAE;AADK,OAAV,CAAT;AAGD,KAPqC,CAOpC;;;AAGF,SAAKe,uBAAL;AACD,GAXD;;AAaAtC,EAAAA,IAAI,CAACI,SAAL,CAAeqD,OAAf,GAAyB,YAAY;AACnC,QAAIpC,IAAI,GAAG,KAAKD,GAAL,CAAS,MAAT,CAAX;AACA,SAAKkB,uBAAL;;AAEA,QAAIjB,IAAJ,EAAU;AACR,UAAIG,SAAS,GAAG,KAAKJ,GAAL,CAAS,WAAT,CAAhB;;AAEA,UAAI,CAACI,SAAL,EAAgB;AACdA,QAAAA,SAAS,GAAG,KAAKJ,GAAL,CAAS,OAAT,EAAkBA,GAAlB,CAAsB,WAAtB,CAAZ;AACD;;AAEDI,MAAAA,SAAS,CAACkC,WAAV,CAAsBrC,IAAtB;AACD;AACF,GAbD;;AAeA,SAAOrB,IAAP;AACD,CAxKD,CAwKED,IAxKF,CAFA;;AA4KA,eAAeC,IAAf","sourcesContent":["import { __extends } from \"tslib\";\nimport modifyCSS from '@antv/dom-util/lib/modify-css';\nimport createDOM from '@antv/dom-util/lib/create-dom';\nimport isString from '@antv/util/lib/is-string';\nimport insertCss from 'insert-css';\nimport Base from '../base';\ninsertCss(\"\\n  .g6-component-contextmenu {\\n    border: 1px solid #e2e2e2;\\n    border-radius: 4px;\\n    font-size: 12px;\\n    color: #545454;\\n    background-color: rgba(255, 255, 255, 0.9);\\n    padding: 10px 8px;\\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\\n  }\\n  .g6-contextmenu-ul {\\n    padding: 0;\\n    margin: 0;\\n    list-style: none;\\n  }\\n\\n\");\n\nvar Menu =\n/** @class */\nfunction (_super) {\n  __extends(Menu, _super);\n\n  function Menu() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Menu.prototype.getDefaultCfgs = function () {\n    return {\n      offsetX: 6,\n      offsetY: 6,\n      handleMenuClick: undefined,\n      // 指定菜单内容，function(e) {...}\n      getContent: function getContent(graph) {\n        return \"\\n          <ul class='g6-contextmenu-ul'>\\n            <li>\\u83DC\\u5355\\u98791</li>\\n            <li>\\u83DC\\u5355\\u98792</li>\\n          </ul>\\n        \";\n      },\n      shouldBegin: function shouldBegin(e) {\n        return true;\n      },\n      // 菜单隐藏事件\n      onHide: function onHide() {\n        return true;\n      },\n      itemTypes: ['node', 'edge', 'combo']\n    };\n  }; // class-methods-use-this\n\n\n  Menu.prototype.getEvents = function () {\n    return {\n      contextmenu: 'onMenuShow'\n    };\n  };\n\n  Menu.prototype.init = function () {\n    var className = this.get('className');\n    var menu = createDOM(\"<div class=\" + (className || 'g6-component-contextmenu') + \"></div>\");\n    modifyCSS(menu, {\n      position: 'absolute',\n      visibility: 'hidden'\n    });\n    var container = this.get('container');\n\n    if (!container) {\n      container = this.get('graph').get('container');\n    }\n\n    container.appendChild(menu);\n    this.set('menu', menu);\n  };\n\n  Menu.prototype.onMenuShow = function (e) {\n    var self = this;\n    e.preventDefault();\n    e.stopPropagation();\n    if (!e.item) return;\n    var shouldBegin = this.get('shouldBegin');\n    if (!shouldBegin(e)) return;\n    var itemTypes = this.get('itemTypes');\n\n    if (e.item && e.item.getType && itemTypes.indexOf(e.item.getType()) === -1) {\n      self.onMenuHide();\n      return;\n    }\n\n    if (!e.item) {\n      return;\n    }\n\n    var menuDom = this.get('menu');\n    var getContent = this.get('getContent');\n    var menu = getContent(e);\n\n    if (isString(menu)) {\n      menuDom.innerHTML = menu;\n    } else {\n      menuDom.innerHTML = menu.outerHTML;\n    } // 清除之前监听的事件\n\n\n    this.removeMenuEventListener();\n    var handleMenuClick = this.get('handleMenuClick');\n\n    if (handleMenuClick) {\n      var handleMenuClickWrapper = function handleMenuClickWrapper(evt) {\n        handleMenuClick(evt.target, e.item);\n      };\n\n      this.set('handleMenuClickWrapper', handleMenuClickWrapper);\n      menuDom.addEventListener('click', handleMenuClickWrapper);\n    }\n\n    var graph = this.get('graph');\n    var width = graph.get('width');\n    var height = graph.get('height');\n    var bbox = menuDom.getBoundingClientRect();\n    var offsetX = this.get('offsetX') || 0;\n    var offsetY = this.get('offsetY') || 0;\n    var x = e.canvasX + offsetX;\n    var y = e.canvasY + offsetY;\n\n    if (x + bbox.width > width) {\n      x = x - bbox.width - offsetX;\n    }\n\n    if (y + bbox.height > height) {\n      y = y - bbox.height - offsetY;\n    }\n\n    modifyCSS(menuDom, {\n      top: y + \"px\",\n      left: x + \"px\",\n      visibility: 'visible'\n    });\n\n    var handler = function handler(evt) {\n      self.onMenuHide();\n    }; // 如果在页面中其他任意地方进行click, 隐去菜单\n\n\n    document.body.addEventListener('click', handler);\n    this.set('handler', handler);\n  };\n\n  Menu.prototype.removeMenuEventListener = function () {\n    var handleMenuClickWrapper = this.get('handleMenuClickWrapper');\n    var handler = this.get('handler');\n\n    if (handleMenuClickWrapper) {\n      var menuDom = this.get('menu');\n      menuDom.removeEventListener('click', handleMenuClickWrapper);\n      this.set('handleMenuClickWrapper', null);\n    }\n\n    if (handler) {\n      document.body.removeEventListener('click', handler);\n    }\n  };\n\n  Menu.prototype.onMenuHide = function () {\n    var menuDom = this.get('menu');\n\n    if (menuDom) {\n      modifyCSS(menuDom, {\n        visibility: 'hidden'\n      });\n    } // 隐藏菜单后需要移除事件监听\n\n\n    this.removeMenuEventListener();\n  };\n\n  Menu.prototype.destroy = function () {\n    var menu = this.get('menu');\n    this.removeMenuEventListener();\n\n    if (menu) {\n      var container = this.get('container');\n\n      if (!container) {\n        container = this.get('graph').get('container');\n      }\n\n      container.removeChild(menu);\n    }\n  };\n\n  return Menu;\n}(Base);\n\nexport default Menu;"]},"metadata":{},"sourceType":"module"}