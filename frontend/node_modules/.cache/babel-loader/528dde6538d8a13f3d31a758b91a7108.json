{"ast":null,"code":"import { deepMix, isElement, isType } from '@antv/util';\nimport { createDom, modifyCSS, getOuterWidth, getOuterHeight } from '@antv/dom-util';\n\nvar StatisticHtml =\n/** @class */\nfunction () {\n  function StatisticHtml(cfg) {\n    var defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    this.x = this.options.x;\n    this.y = this.options.y;\n    this.html = this.options.html;\n    this.container = this.options.container;\n  }\n\n  StatisticHtml.prototype.render = function () {\n    if (isElement(this.container)) {\n      this.wrapperNode = createDom('<div class=\"g2plot-htmlStatistic\"></div>');\n      this.container.appendChild(this.wrapperNode);\n      modifyCSS(this.wrapperNode, {\n        position: 'absolute',\n        pointerEvents: 'none'\n      });\n      var htmlNode = this.html;\n      this.wrapperNode.appendChild(htmlNode);\n      this.setDomPosition(this.x, this.y);\n    }\n  };\n\n  StatisticHtml.prototype.updateHtml = function (content) {\n    if (isType(content, 'HTMLDivElement')) {\n      this.wrapperNode.innerHTML = '';\n      this.wrapperNode.appendChild(content);\n    } else {\n      this.wrapperNode.innerHTML = content;\n    }\n\n    this.setDomPosition(this.x, this.y);\n  };\n\n  StatisticHtml.prototype.updatePosition = function (x, y) {\n    this.x = x;\n    this.y = y;\n    this.setDomPosition(x, y);\n  };\n\n  StatisticHtml.prototype.destroy = function () {\n    this.container.removeChild(this.wrapperNode);\n  };\n\n  StatisticHtml.prototype.getDefaultOptions = function () {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      html: '',\n      container: null,\n      alignX: 'middle',\n      alignY: 'middle'\n    };\n  };\n\n  StatisticHtml.prototype.setDomPosition = function (x, y) {\n    var xPosition = x;\n    var yPosition = y;\n    var width = getOuterWidth(this.wrapperNode);\n    var height = getOuterHeight(this.wrapperNode);\n\n    if (this.options.alignX === 'middle') {\n      xPosition = x - width / 2;\n    }\n\n    if (this.options.alignY === 'middle') {\n      yPosition = y - height / 2;\n    }\n\n    modifyCSS(this.wrapperNode, {\n      top: Math.round(yPosition) + \"px\",\n      left: Math.round(xPosition) + \"px\",\n\n      /**\n       * 支持Ant Design Charts\n       * render是异步的操作，获取到的 width 为 0\n       */\n      transform: width > 0 ? 'none' : 'translate(-50%, -50%)'\n    });\n  };\n\n  return StatisticHtml;\n}();\n\nexport default StatisticHtml;","map":{"version":3,"sources":["../../src/components/statistic.ts"],"names":[],"mappings":"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","sourcesContent":["import { deepMix, isElement, isType } from '@antv/util';\nimport { createDom, modifyCSS, getOuterWidth, getOuterHeight } from '@antv/dom-util';\n\nexport interface IStatisticHtml {\n  x?: number;\n  y?: number;\n  html?: string;\n  alignX?: string;\n  alignY?: string;\n  container?: any;\n  statisticClass?: string;\n  [key: string]: any;\n}\n\nexport default class StatisticHtml {\n  public wrapperNode: HTMLElement;\n  protected x: number;\n  protected y: number;\n  protected html: HTMLDivElement;\n  protected container: any;\n  protected options: any;\n\n  constructor(cfg: IStatisticHtml) {\n    const defaultOptions = this.getDefaultOptions();\n    this.options = deepMix(defaultOptions, cfg, {});\n    this.x = this.options.x;\n    this.y = this.options.y;\n    this.html = this.options.html;\n    this.container = this.options.container;\n  }\n\n  protected render() {\n    if (isElement(this.container)) {\n      this.wrapperNode = createDom('<div class=\"g2plot-htmlStatistic\"></div>');\n      this.container.appendChild(this.wrapperNode);\n      modifyCSS(this.wrapperNode, {\n        position: 'absolute',\n        pointerEvents: 'none', // 阻止 dom 事件击穿\n      });\n      const htmlNode = this.html;\n      this.wrapperNode.appendChild(htmlNode);\n      this.setDomPosition(this.x, this.y);\n    }\n  }\n\n  public updateHtml(content: HTMLDivElement | string) {\n    if (isType(content, 'HTMLDivElement')) {\n      this.wrapperNode.innerHTML = '';\n      this.wrapperNode.appendChild(content as HTMLDivElement);\n    } else {\n      this.wrapperNode.innerHTML = content as string;\n    }\n    this.setDomPosition(this.x, this.y);\n  }\n\n  public updatePosition(x, y) {\n    this.x = x;\n    this.y = y;\n    this.setDomPosition(x, y);\n  }\n\n  public destroy() {\n    this.container.removeChild(this.wrapperNode);\n  }\n\n  protected getDefaultOptions() {\n    return {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      html: '',\n      container: null,\n      alignX: 'middle',\n      alignY: 'middle',\n    };\n  }\n\n  protected setDomPosition(x: number, y: number) {\n    let xPosition = x;\n    let yPosition = y;\n    const width = getOuterWidth(this.wrapperNode);\n    const height = getOuterHeight(this.wrapperNode);\n    if (this.options.alignX === 'middle') {\n      xPosition = x - width / 2;\n    }\n    if (this.options.alignY === 'middle') {\n      yPosition = y - height / 2;\n    }\n    modifyCSS(this.wrapperNode, {\n      top: `${Math.round(yPosition)}px`,\n      left: `${Math.round(xPosition)}px`,\n      /**\n       * 支持Ant Design Charts\n       * render是异步的操作，获取到的 width 为 0\n       */\n      transform: width > 0 ? 'none' : 'translate(-50%, -50%)',\n    });\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}