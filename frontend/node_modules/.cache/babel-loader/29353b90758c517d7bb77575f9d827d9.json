{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\vietn\\\\Desktop\\\\AppEnegry2020\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\vietn\\\\Desktop\\\\AppEnegry2020\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\vietn\\\\Desktop\\\\AppEnegry2020\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\vietn\\\\Desktop\\\\AppEnegry2020\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\vietn\\\\Desktop\\\\AppEnegry2020\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import styles from'./styles';import Button from'@material-ui/core/Button';import{Box}from'@material-ui/core';import{withStyles}from'@material-ui/core/styles';import{connect}from'react-redux';import{bindActionCreators}from'redux';import*as modalActions from'./../../actions/modal';import*as userActions from'./../../actions/auths';import{Redirect}from'react-router-dom';import SignupForm from'./SignupForm/index';var AccountManager=/*#__PURE__*/function(_Component){_inherits(AccountManager,_Component);var _super=_createSuper(AccountManager);function AccountManager(){var _this;_classCallCheck(this,AccountManager);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.showModalDeleteUser=function(user){var _this$props=_this.props,modalActionCreators=_this$props.modalActionCreators,classes=_this$props.classes;var hideModal=modalActionCreators.hideModal,showModal=modalActionCreators.showModal,changeModalTitle=modalActionCreators.changeModalTitle,changeModalContent=modalActionCreators.changeModalContent;showModal();changeModalTitle('Xóa tài khoản!');changeModalContent(/*#__PURE__*/React.createElement(\"div\",{className:classes.modalDelete},/*#__PURE__*/React.createElement(\"div\",{className:classes.modalConfimText},\"B\\u1EA1n ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a \",'',/*#__PURE__*/React.createElement(\"span\",{className:classes.modalConfimTextBold},user.name,\"? \")),/*#__PURE__*/React.createElement(Box,{className:classes.box,mt:2},/*#__PURE__*/React.createElement(Box,null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",style:{backgroundColor:'#00CC00'},className:classes.button1,onClick:function onClick(){return _this.handleDeleteUser(user);}},\"\\u0110\\u1ED3ng \\xDD\")),/*#__PURE__*/React.createElement(Box,{ml:1},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",style:{backgroundColor:'#FF0000'},className:classes.button1,onClick:hideModal},\"H\\u1EE7y B\\u1ECF\")))));};_this.showModalDeleteUserLog=function(userlog){var _this$props2=_this.props,modalActionCreators=_this$props2.modalActionCreators,classes=_this$props2.classes;var hideModal=modalActionCreators.hideModal,showModal=modalActionCreators.showModal,changeModalTitle=modalActionCreators.changeModalTitle,changeModalContent=modalActionCreators.changeModalContent;showModal();changeModalTitle(' Xóa lịch sử!');changeModalContent(/*#__PURE__*/React.createElement(\"div\",{className:classes.modalDelete},/*#__PURE__*/React.createElement(\"div\",{className:classes.modalConfimText},\"B\\u1EA1n ch\\u1EAFc ch\\u1EAFn mu\\u1ED1n x\\xF3a l\\u1ECBch s\\u1EED \",'',/*#__PURE__*/React.createElement(\"span\",{className:classes.modalConfimTextBold},userlog.name,\"? \")),/*#__PURE__*/React.createElement(Box,{className:classes.box,mt:2},/*#__PURE__*/React.createElement(Box,null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",style:{backgroundColor:'#00CC00'},className:classes.button1,onClick:function onClick(){return _this.handleDeleteUserLog(userlog);}},\"\\u0110\\u1ED3ng \\xDD\")),/*#__PURE__*/React.createElement(Box,{ml:1},/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",style:{backgroundColor:'#FF0000'},className:classes.button1,onClick:hideModal},\"H\\u1EE7y B\\u1ECF\")))));};_this.openForm=function(){var modalActionCreators=_this.props.modalActionCreators;var showModal=modalActionCreators.showModal,changeModalTitle=modalActionCreators.changeModalTitle,changeModalContent=modalActionCreators.changeModalContent;showModal();changeModalTitle('Đăng kí tài khoản!');changeModalContent(/*#__PURE__*/React.createElement(SignupForm,null));};_this.showModalEditUser=function(user){var _this$props3=_this.props,modalActionCreators=_this$props3.modalActionCreators,userActionCreators=_this$props3.userActionCreators;var setUserEditting=userActionCreators.setUserEditting;var showModal=modalActionCreators.showModal,changeModalTitle=modalActionCreators.changeModalTitle,changeModalContent=modalActionCreators.changeModalContent;setUserEditting(user);showModal();changeModalTitle('Cập nhật tài khoản!');changeModalContent(/*#__PURE__*/React.createElement(SignupForm,null));};return _this;}_createClass(AccountManager,[{key:\"componentDidMount\",value:function componentDidMount(){var userActionCreators=this.props.userActionCreators;var fetchListUser=userActionCreators.fetchListUser,authLogHistory=userActionCreators.authLogHistory;fetchListUser();authLogHistory();}},{key:\"handleDeleteUser\",value:function handleDeleteUser(user){var id=user.id;var userActionCreators=this.props.userActionCreators;var setUserDelete=userActionCreators.setUserDelete;setUserDelete(id);}},{key:\"handleDeleteUserLog\",value:function handleDeleteUserLog(userlog){var id=userlog.id;var userActionCreators=this.props.userActionCreators;var authLogDeleteHistory=userActionCreators.authLogDeleteHistory;authLogDeleteHistory(id);}},{key:\"showUsersSignup\",value:function showUsersSignup(){var _this2=this;var _this$props4=this.props,listUsers=_this$props4.listUsers,classes=_this$props4.classes;var users=listUsers;var result=null;if(users.length>0){result=users.map(function(user,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"th\",{className:classes.textTd,scope:\"row\"},index+1),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},user.name),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},user.email),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},user.operator),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},user.modified_at),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-sm\",style:{margin:'5px',fontSize:'100%',width:'65px',backgroundColor:'#00CC00',color:'#FFF'},onClick:function onClick(){return _this2.showModalEditUser(user);}},\"Edit\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-danger btn-sm \",style:{fontSize:'100%',margin:'5px',width:'65px',textAlign:\"center\",backgroundColor:'#FF0000'},onClick:function onClick(){return _this2.showModalDeleteUser(user);}},\"Delete\")));});}return result;}},{key:\"showUsersLog\",value:function showUsersLog(){var _this3=this;var _this$props5=this.props,listUserLogs=_this$props5.listUserLogs,classes=_this$props5.classes;console.log(listUserLogs);var userLogs=listUserLogs;var result=null;if(userLogs.length!==0){result=userLogs.map(function(userlog,index){return/*#__PURE__*/React.createElement(\"tr\",{key:index},/*#__PURE__*/React.createElement(\"th\",{className:classes.textTd,scope:\"row\"},index+1),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},userlog.name),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},userlog.email),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},userlog.status),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},userlog.timestamp),/*#__PURE__*/React.createElement(\"td\",{className:classes.textTd},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-danger btn-sm \",style:{fontSize:'100%',margin:'5px',width:'65px',textAlign:\"center\",backgroundColor:'#FF0000'},onClick:function onClick(){return _this3.showModalDeleteUserLog(userlog);}},\"Delete\")));});}return result;}},{key:\"render\",value:function render(){var _this$props6=this.props,classes=_this$props6.classes,redirectToReferrer=_this$props6.redirectToReferrer;if(redirectToReferrer===false&&localStorage.getItem(\"token:\")===null){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}return/*#__PURE__*/React.createElement(\"div\",{className:\"container overflow-scroll overflow-auto \",style:{minWidth:'100%',marginTop:'2vh',height:'82vh'}},/*#__PURE__*/React.createElement(\"div\",{className:classes.text},\"QU\\u1EA2N L\\xDD T\\xC0I KHO\\u1EA2N\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.button},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn\",style:{fontSize:'1rem',maxHeight:'5%',maxWidth:'30%',textAlign:'center',backgroundColor:'#00CC33',color:'#FFF'},onClick:this.openForm},\"Th\\xEAm t\\xE0i kho\\u1EA3n\")),/*#__PURE__*/React.createElement(\"label\",{className:\"font-weight-bolder h6 w-100 mb-5 p-1\",style:{height:'fit-content',maxHeight:'40vh',borderBottom:'2px solid #00CC00'}},\" Danh s\\xE1ch t\\xE0i kho\\u1EA3n \\u0111\\u0103ng k\\xED\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table overflow-scroll table-sm overflow-auto table-responsive-sm mb-5 \",style:{minWidth:'100%',fontSize:'100%',textAlign:'center'}},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Stt\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Name\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Email\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Operator\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Time\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.showUsersSignup())),/*#__PURE__*/React.createElement(\"label\",{className:\"font-weight-bolder h6 w-100 mb-5 p-1\",style:{height:'fit-content',maxHeight:'40vh',borderBottom:'2px solid #00CC00'}},\"L\\u1ECBch s\\u1EED \\u0111\\u0103ng nh\\u1EADp\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table overflow-scroll table-sm overflow-auto table-responsive-sm mb-5\",style:{minWidth:'100%',fontSize:'100%',textAlign:'center'}},/*#__PURE__*/React.createElement(\"thead\",{className:\"thead-dark\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Stt\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Name\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Email\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Status\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Time\"),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\"},\"Action\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.showUsersLog())));}}]);return AccountManager;}(Component);var mapStateToProps=function mapStateToProps(state){return _objectSpread(_objectSpread({},state),{},{listUsers:state.auth.listUsers,listUserLogs:state.auth.listUserLogs,redirectToReferrer:state.auth.redirectToReferrer});};var mapDispatchToProps=function mapDispatchToProps(dispatch,props){return{userActionCreators:bindActionCreators(userActions,dispatch),modalActionCreators:bindActionCreators(modalActions,dispatch)};};export default withStyles(styles)(connect(mapStateToProps,mapDispatchToProps)(AccountManager));","map":{"version":3,"sources":["C:/Users/vietn/Desktop/AppEnegry2020/frontend/src/containers/AccountManager/index.js"],"names":["React","Component","styles","Button","Box","withStyles","connect","bindActionCreators","modalActions","userActions","Redirect","SignupForm","AccountManager","showModalDeleteUser","user","props","modalActionCreators","classes","hideModal","showModal","changeModalTitle","changeModalContent","modalDelete","modalConfimText","modalConfimTextBold","name","box","backgroundColor","button1","handleDeleteUser","showModalDeleteUserLog","userlog","handleDeleteUserLog","openForm","showModalEditUser","userActionCreators","setUserEditting","fetchListUser","authLogHistory","id","setUserDelete","authLogDeleteHistory","listUsers","users","result","length","map","index","textTd","email","operator","modified_at","margin","fontSize","width","color","textAlign","listUserLogs","console","log","userLogs","status","timestamp","redirectToReferrer","localStorage","getItem","minWidth","marginTop","height","text","button","maxHeight","maxWidth","borderBottom","showUsersSignup","showUsersLog","mapStateToProps","state","auth","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport styles from './styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport {Box} from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport  {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport * as modalActions from './../../actions/modal';\r\nimport * as userActions from './../../actions/auths';\r\nimport {Redirect} from 'react-router-dom';\r\nimport SignupForm from './SignupForm/index';\r\n\r\nclass AccountManager extends Component {\r\n\r\n    componentDidMount(){\r\n        const { userActionCreators}=this.props;\r\n        const { fetchListUser,authLogHistory } = userActionCreators;\r\n        fetchListUser();\r\n        authLogHistory();\r\n\r\n    };\r\n    showModalDeleteUser=(user)=>{\r\n        const {modalActionCreators,classes}=this.props;\r\n        const {hideModal,showModal,changeModalTitle,changeModalContent}=modalActionCreators;\r\n        showModal();\r\n        changeModalTitle('Xóa tài khoản!');\r\n        changeModalContent(\r\n                        <div className={classes.modalDelete}>\r\n                            <div className={classes.modalConfimText}>\r\n                                Bạn chắc chắn muốn xóa {''}\r\n                                <span className={classes.modalConfimTextBold}>{user.name}? </span>\r\n                            </div>\r\n                            <Box className={classes.box} mt={2}>\r\n                                \r\n                                <Box >\r\n                                    <Button \r\n                                    variant=\"contained\"\r\n                                    color=\"primary\" \r\n                                    style={{backgroundColor:'#00CC00'}}\r\n                                    className={classes.button1}\r\n                                    onClick={()=>this.handleDeleteUser(user)}>\r\n                                        Đồng Ý\r\n                                    </Button>\r\n                                </Box>\r\n                                <Box ml={1}>\r\n                                    <Button \r\n                                    variant=\"contained\" \r\n                                    color=\"secondary\" \r\n                                    style={{backgroundColor:'#FF0000'}}\r\n                                    className={classes.button1}\r\n                                    onClick={hideModal}>\r\n                                        Hủy Bỏ\r\n                                    </Button>   \r\n                                </Box>\r\n                            </Box>\r\n                        </div>\r\n             );\r\n    }\r\n    showModalDeleteUserLog=(userlog)=>{\r\n        const {modalActionCreators,classes}=this.props;\r\n        const {hideModal,showModal,changeModalTitle,changeModalContent}=modalActionCreators;\r\n        showModal();\r\n        changeModalTitle(' Xóa lịch sử!');\r\n        changeModalContent(\r\n                        <div className={classes.modalDelete}>\r\n                            <div className={classes.modalConfimText}>\r\n                                Bạn chắc chắn muốn xóa lịch sử {''}\r\n                                <span className={classes.modalConfimTextBold}>{userlog.name}? </span>\r\n                            </div>\r\n                            <Box className={classes.box} mt={2}>\r\n                                \r\n                                <Box >\r\n                                    <Button \r\n                                    variant=\"contained\"\r\n                                    color=\"primary\" \r\n                                    style={{backgroundColor:'#00CC00'}}\r\n                                    className={classes.button1}\r\n                                    onClick={()=>this.handleDeleteUserLog(userlog)}>\r\n                                        Đồng Ý\r\n                                    </Button>\r\n                                </Box>\r\n                                <Box ml={1}>\r\n                                    <Button \r\n                                    variant=\"contained\" \r\n                                    color=\"secondary\" \r\n                                    style={{backgroundColor:'#FF0000'}}\r\n                                    className={classes.button1}\r\n                                    onClick={hideModal}>\r\n                                        Hủy Bỏ\r\n                                    </Button>   \r\n                                </Box>\r\n                            </Box>\r\n                        </div>\r\n             );\r\n    }\r\n    handleDeleteUser(user){\r\n        const {id}=user;\r\n        const {userActionCreators}=this.props;\r\n        const {setUserDelete} = userActionCreators;\r\n        setUserDelete(id);\r\n    }\r\n    handleDeleteUserLog(userlog){\r\n        const {id}=userlog;\r\n        const {userActionCreators}=this.props;\r\n        const {authLogDeleteHistory} = userActionCreators;\r\n        authLogDeleteHistory(id);\r\n    }\r\n    openForm=()=>{\r\n        const {modalActionCreators}=this.props;\r\n        const {showModal,changeModalTitle,changeModalContent}=modalActionCreators;\r\n        showModal();\r\n        changeModalTitle('Đăng kí tài khoản!');\r\n        changeModalContent(<SignupForm/>);\r\n    }\r\n    showModalEditUser=(user)=>{\r\n        const {modalActionCreators,userActionCreators}=this.props;\r\n        const {setUserEditting} = userActionCreators;\r\n        const {showModal,changeModalTitle,changeModalContent}=modalActionCreators;\r\n        setUserEditting(user);\r\n        showModal();\r\n        changeModalTitle('Cập nhật tài khoản!');\r\n        changeModalContent(<SignupForm/>);\r\n    }\r\n    showUsersSignup() {\r\n        const {listUsers,classes}=this.props;\r\n        var  users  = listUsers;\r\n        var result = null;\r\n        if (users.length > 0) {\r\n            result = users.map((user, index) => {\r\n                return (\r\n                    <tr key={index}>\r\n                        <th className={classes.textTd} scope=\"row\">{index+1}</th>\r\n                        <td className={classes.textTd}>{user.name}</td>\r\n                        <td className={classes.textTd}>{user.email}</td>\r\n                        <td className={classes.textTd}>{user.operator}</td>\r\n                        <td className={classes.textTd}>{user.modified_at}</td>\r\n                        <td className={classes.textTd}>\r\n                            <button \r\n                            type=\"button\" \r\n                            className=\"btn btn-sm\" \r\n                            style={{ margin:'5px',fontSize:'100%', width: '65px',backgroundColor:'#00CC00',color:'#FFF'}}  \r\n                            onClick={() =>this.showModalEditUser(user)}>\r\n                                Edit\r\n                            </button>\r\n                            <button \r\n                            type=\"button\" \r\n                            className=\"btn btn-danger btn-sm \" \r\n                            style={{fontSize:'100%', margin:'5px', width: '65px',textAlign:\"center\",backgroundColor:'#FF0000'}}\r\n                            onClick={() => this.showModalDeleteUser(user)}>\r\n                                Delete\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                );\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n\r\n\r\n    showUsersLog() {\r\n        const {listUserLogs,classes}=this.props;\r\n        console.log(listUserLogs)\r\n        const userLogs = listUserLogs;\r\n        let result = null;\r\n        if (userLogs.length !== 0) {\r\n            result = userLogs.map((userlog, index) => {\r\n                return (\r\n                    <tr key={index}>\r\n                        <th className={classes.textTd} scope=\"row\">{index+1}</th>\r\n                        <td className={classes.textTd}>{userlog.name}</td>\r\n                        <td className={classes.textTd}>{userlog.email}</td>\r\n                        <td className={classes.textTd}>{userlog.status}</td>\r\n                        <td className={classes.textTd}>{userlog.timestamp}</td>\r\n                        <td className={classes.textTd}>\r\n                            <button \r\n                            type=\"button\" \r\n                            className=\"btn btn-danger btn-sm \" \r\n                            style={{fontSize:'100%', margin:'5px', width: '65px',textAlign:\"center\",backgroundColor:'#FF0000'}}\r\n                            onClick={() => this.showModalDeleteUserLog(userlog)}>\r\n                                Delete\r\n                            </button>\r\n                        </td>\r\n                    </tr>\r\n                );\r\n            });\r\n        }\r\n        return result;\r\n    }\r\n\r\nrender(){\r\n    const {classes,redirectToReferrer}= this.props;\r\n    if (redirectToReferrer === false && localStorage.getItem(\"token:\") === null){\r\n        return <Redirect to=\"/\" />\r\n      }\r\n\r\n    return(\r\n            <div className=\"container overflow-scroll overflow-auto \" style={{minWidth:'100%',marginTop: '2vh',height: '82vh'}}>\r\n                    <div className={classes.text}>QUẢN LÝ TÀI KHOẢN</div>\r\n                    <div className={classes.button}>\r\n                        <button  \r\n                        type=\"button\" \r\n                        className=\"btn\"\r\n                        style={{fontSize:'1rem',maxHeight:'5%',maxWidth:'30%',textAlign:'center',backgroundColor:'#00CC33',color:'#FFF'}}\r\n                        onClick={this.openForm}>\r\n                            Thêm tài khoản\r\n                        </button> \r\n                    </div>\r\n                    <label className=\"font-weight-bolder h6 w-100 mb-5 p-1\" style={{height:'fit-content',maxHeight:'40vh',borderBottom: '2px solid #00CC00' }}> Danh sách tài khoản đăng kí</label>\r\n                    <table className=\"table overflow-scroll table-sm overflow-auto table-responsive-sm mb-5 \" style={{minWidth: '100%',fontSize:'100%',textAlign: 'center'}}>\r\n                        <thead className=\"thead-dark\" >\r\n                            <tr >\r\n                            <th scope=\"col\">Stt</th>\r\n                            <th scope=\"col\">Name</th>\r\n                            <th scope=\"col\">Email</th>\r\n                            <th scope=\"col\">Operator</th>\r\n                            <th scope=\"col\">Time</th>\r\n                            <th scope=\"col\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {this.showUsersSignup()}\r\n                        </tbody>\r\n                    </table>\r\n                    <label className=\"font-weight-bolder h6 w-100 mb-5 p-1\" style={{height:'fit-content',maxHeight:'40vh',borderBottom: '2px solid #00CC00' }}>Lịch sử đăng nhập</label>\r\n                    <table className=\"table overflow-scroll table-sm overflow-auto table-responsive-sm mb-5\" style={{minWidth: '100%',fontSize:'100%',textAlign: 'center'}}>\r\n                        <thead className=\"thead-dark\" >\r\n                            <tr >\r\n                            <th scope=\"col\">Stt</th>\r\n                            <th scope=\"col\">Name</th>\r\n                            <th scope=\"col\">Email</th>\r\n                            <th scope=\"col\">Status</th>\r\n                            <th scope=\"col\">Time</th>\r\n                            <th scope=\"col\">Action</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {this.showUsersLog()}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n        )\r\n    }\r\n\r\n}\r\nconst mapStateToProps=(state)=>{\r\n    return{\r\n        ...state,\r\n        listUsers:state.auth.listUsers,\r\n        listUserLogs:state.auth.listUserLogs,\r\n        redirectToReferrer:state.auth.redirectToReferrer,\r\n    }\r\n};\r\n\r\nconst mapDispatchToProps =(dispatch,props)=>{\r\n    return{\r\n        userActionCreators:bindActionCreators(userActions,dispatch),\r\n        modalActionCreators:bindActionCreators(modalActions,dispatch)\r\n    }\r\n}\r\nexport default withStyles(styles)(connect(mapStateToProps,mapDispatchToProps)(AccountManager));\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}