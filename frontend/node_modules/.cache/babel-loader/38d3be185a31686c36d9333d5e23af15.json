{"ast":null,"code":"var DEFAULT_TRIGGER = 'click';\nvar ALLOW_EVENTS = ['click', 'drag'];\nvar DEFAULT_KEY = undefined;\nvar ALLOW_KEYS = ['shift', 'ctrl', 'control', 'alt', 'meta', undefined];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      trigger: DEFAULT_TRIGGER,\n      key: DEFAULT_KEY\n    };\n  },\n  getEvents: function getEvents() {\n    var self = this; // 检测输入是否合法\n\n    if (!(ALLOW_EVENTS.indexOf(self.trigger.toLowerCase()) > -1)) {\n      self.trigger = DEFAULT_TRIGGER; // eslint-disable-next-line no-console\n\n      console.warn(\"Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'\");\n    }\n\n    if (self.key && ALLOW_KEYS.indexOf(self.key.toLowerCase()) === -1) {\n      self.trigger = DEFAULT_KEY; // eslint-disable-next-line no-console\n\n      console.warn(\"Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined\");\n    }\n\n    var events;\n\n    if (self.trigger === 'drag') {\n      events = {\n        'node:dragstart': 'onClick',\n        drag: 'updateEndPoint',\n        'node:drop': 'onClick',\n        'dragend': 'onDragEnd'\n      };\n    } else if (self.trigger === 'click') {\n      events = {\n        'node:click': 'onClick',\n        mousemove: 'updateEndPoint',\n        'edge:click': 'cancelCreating'\n      };\n    }\n\n    if (self.key) {\n      events.keydown = 'onKeyDown';\n      events.keyup = 'onKeyUp';\n    }\n\n    return events;\n  },\n  onDragEnd: function onDragEnd(ev) {\n    var self = this;\n    if (self.key && !self.keydown) return;\n    var item = ev.item;\n    if (!item || item.getID() === self.source || item.getType() !== 'node') self.cancelCreating({\n      item: self.edge,\n      x: ev.x,\n      y: ev.y\n    });\n  },\n  // 如果边的起点没有指定，则根据起点创建新边；如果起点已经指定而终点未指定，则指定终点\n  onClick: function onClick(ev) {\n    var self = this;\n    if (self.key && !self.keydown) return;\n    var node = ev.item;\n    var graph = self.graph;\n    var model = node.getModel(); // 如果起点已经指定而终点未指定，则指定终点\n\n    if (self.addingEdge && self.edge) {\n      if (!self.shouldEnd.call(self, ev)) return;\n      var updateCfg = {\n        target: model.id\n      };\n\n      if (self.source === model.id) {\n        updateCfg.type = 'loop';\n      }\n\n      graph.updateItem(self.edge, updateCfg);\n      graph.emit('aftercreateedge', {\n        edge: self.edge\n      });\n      self.edge = null;\n      self.addingEdge = false;\n    } else {\n      // 如果边的起点没有指定，则根据起点创建新边\n      if (!self.shouldBegin.call(self, ev)) return;\n      self.edge = graph.addItem('edge', {\n        source: model.id,\n        target: model.id\n      }, false);\n      self.source = model.id;\n      self.addingEdge = true;\n    }\n  },\n  // 边的起点已经确定，边的末端跟随鼠标移动\n  updateEndPoint: function updateEndPoint(ev) {\n    var self = this;\n    if (self.key && !self.keydown) return;\n    var point = {\n      x: ev.x,\n      y: ev.y\n    };\n\n    if (self.addingEdge && self.edge) {\n      // 更新边的终点为鼠标位置\n      self.graph.updateItem(self.edge, {\n        target: point\n      }, false);\n    }\n  },\n  // 取消增加边，删除该边；或指定终点\n  cancelCreating: function cancelCreating(ev) {\n    var self = this;\n    if (self.key && !self.keydown) return;\n    var graph = self.graph;\n    var currentEdge = ev.item;\n\n    if (self.addingEdge && self.edge === currentEdge) {\n      var cancelEdge = true; // !graph.get('groupByTypes') 将会导致选中终点时实际上边在最上层，节点无法响应 click 事件\n\n      if (!graph.get('groupByTypes')) {\n        // 此时需要判断点击的位置是否在节点范围内，若在，则指定终点。否则取消增加边\n        var x = ev.x,\n            y = ev.y;\n        var nodes = graph.getNodes();\n        var length_1 = nodes.length;\n\n        for (var i = 0; i < length_1; i++) {\n          var node = nodes[i];\n          var model = node.getModel();\n          var nodeBBox = node.getBBox();\n\n          if (x <= nodeBBox.maxX && x >= nodeBBox.minX && y <= nodeBBox.maxY && y >= nodeBBox.minY) {\n            if (!self.shouldEnd.call(self, {\n              x: ev.x,\n              y: ev.y,\n              canvasX: ev.canvasX,\n              canvasY: ev.canvasY,\n              clientX: ev.clientX,\n              clientY: ev.clientY,\n              item: node\n            })) {\n              return;\n            }\n\n            graph.updateItem(self.edge, {\n              target: model.id\n            });\n            graph.emit('aftercreateedge', {\n              edge: self.edge\n            });\n            cancelEdge = false;\n            break;\n          }\n        }\n      }\n\n      if (cancelEdge) graph.removeItem(self.edge, false);\n      self.edge = null;\n      self.addingEdge = false;\n    }\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    if (code.toLowerCase() === self.key.toLowerCase()) {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    var self = this;\n\n    if (self.addingEdge && self.edge) {\n      // 清除正在增加的边\n      self.graph.removeItem(self.edge, false);\n      self.addingEdge = false;\n      self.edge = null;\n    }\n\n    this.keydown = false;\n  }\n};","map":{"version":3,"sources":["C:/Users/vietn/Desktop/AppEnegry2020/frontend/node_modules/@antv/g6/es/behavior/create-edge.js"],"names":["DEFAULT_TRIGGER","ALLOW_EVENTS","DEFAULT_KEY","undefined","ALLOW_KEYS","getDefaultCfg","trigger","key","getEvents","self","indexOf","toLowerCase","console","warn","events","drag","mousemove","keydown","keyup","onDragEnd","ev","item","getID","source","getType","cancelCreating","edge","x","y","onClick","node","graph","model","getModel","addingEdge","shouldEnd","call","updateCfg","target","id","type","updateItem","emit","shouldBegin","addItem","updateEndPoint","point","currentEdge","cancelEdge","get","nodes","getNodes","length_1","length","i","nodeBBox","getBBox","maxX","minX","maxY","minY","canvasX","canvasY","clientX","clientY","removeItem","onKeyDown","e","code","onKeyUp"],"mappings":"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","sourcesContent":["var DEFAULT_TRIGGER = 'click';\nvar ALLOW_EVENTS = ['click', 'drag'];\nvar DEFAULT_KEY = undefined;\nvar ALLOW_KEYS = ['shift', 'ctrl', 'control', 'alt', 'meta', undefined];\nexport default {\n  getDefaultCfg: function getDefaultCfg() {\n    return {\n      trigger: DEFAULT_TRIGGER,\n      key: DEFAULT_KEY\n    };\n  },\n  getEvents: function getEvents() {\n    var self = this; // 检测输入是否合法\n\n    if (!(ALLOW_EVENTS.indexOf(self.trigger.toLowerCase()) > -1)) {\n      self.trigger = DEFAULT_TRIGGER; // eslint-disable-next-line no-console\n\n      console.warn(\"Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'\");\n    }\n\n    if (self.key && ALLOW_KEYS.indexOf(self.key.toLowerCase()) === -1) {\n      self.trigger = DEFAULT_KEY; // eslint-disable-next-line no-console\n\n      console.warn(\"Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined\");\n    }\n\n    var events;\n\n    if (self.trigger === 'drag') {\n      events = {\n        'node:dragstart': 'onClick',\n        drag: 'updateEndPoint',\n        'node:drop': 'onClick',\n        'dragend': 'onDragEnd'\n      };\n    } else if (self.trigger === 'click') {\n      events = {\n        'node:click': 'onClick',\n        mousemove: 'updateEndPoint',\n        'edge:click': 'cancelCreating'\n      };\n    }\n\n    if (self.key) {\n      events.keydown = 'onKeyDown';\n      events.keyup = 'onKeyUp';\n    }\n\n    return events;\n  },\n  onDragEnd: function onDragEnd(ev) {\n    var self = this;\n    if (self.key && !self.keydown) return;\n    var item = ev.item;\n    if (!item || item.getID() === self.source || item.getType() !== 'node') self.cancelCreating({\n      item: self.edge,\n      x: ev.x,\n      y: ev.y\n    });\n  },\n  // 如果边的起点没有指定，则根据起点创建新边；如果起点已经指定而终点未指定，则指定终点\n  onClick: function onClick(ev) {\n    var self = this;\n    if (self.key && !self.keydown) return;\n    var node = ev.item;\n    var graph = self.graph;\n    var model = node.getModel(); // 如果起点已经指定而终点未指定，则指定终点\n\n    if (self.addingEdge && self.edge) {\n      if (!self.shouldEnd.call(self, ev)) return;\n      var updateCfg = {\n        target: model.id\n      };\n\n      if (self.source === model.id) {\n        updateCfg.type = 'loop';\n      }\n\n      graph.updateItem(self.edge, updateCfg);\n      graph.emit('aftercreateedge', {\n        edge: self.edge\n      });\n      self.edge = null;\n      self.addingEdge = false;\n    } else {\n      // 如果边的起点没有指定，则根据起点创建新边\n      if (!self.shouldBegin.call(self, ev)) return;\n      self.edge = graph.addItem('edge', {\n        source: model.id,\n        target: model.id\n      }, false);\n      self.source = model.id;\n      self.addingEdge = true;\n    }\n  },\n  // 边的起点已经确定，边的末端跟随鼠标移动\n  updateEndPoint: function updateEndPoint(ev) {\n    var self = this;\n    if (self.key && !self.keydown) return;\n    var point = {\n      x: ev.x,\n      y: ev.y\n    };\n\n    if (self.addingEdge && self.edge) {\n      // 更新边的终点为鼠标位置\n      self.graph.updateItem(self.edge, {\n        target: point\n      }, false);\n    }\n  },\n  // 取消增加边，删除该边；或指定终点\n  cancelCreating: function cancelCreating(ev) {\n    var self = this;\n    if (self.key && !self.keydown) return;\n    var graph = self.graph;\n    var currentEdge = ev.item;\n\n    if (self.addingEdge && self.edge === currentEdge) {\n      var cancelEdge = true; // !graph.get('groupByTypes') 将会导致选中终点时实际上边在最上层，节点无法响应 click 事件\n\n      if (!graph.get('groupByTypes')) {\n        // 此时需要判断点击的位置是否在节点范围内，若在，则指定终点。否则取消增加边\n        var x = ev.x,\n            y = ev.y;\n        var nodes = graph.getNodes();\n        var length_1 = nodes.length;\n\n        for (var i = 0; i < length_1; i++) {\n          var node = nodes[i];\n          var model = node.getModel();\n          var nodeBBox = node.getBBox();\n\n          if (x <= nodeBBox.maxX && x >= nodeBBox.minX && y <= nodeBBox.maxY && y >= nodeBBox.minY) {\n            if (!self.shouldEnd.call(self, {\n              x: ev.x,\n              y: ev.y,\n              canvasX: ev.canvasX,\n              canvasY: ev.canvasY,\n              clientX: ev.clientX,\n              clientY: ev.clientY,\n              item: node\n            })) {\n              return;\n            }\n\n            graph.updateItem(self.edge, {\n              target: model.id\n            });\n            graph.emit('aftercreateedge', {\n              edge: self.edge\n            });\n            cancelEdge = false;\n            break;\n          }\n        }\n      }\n\n      if (cancelEdge) graph.removeItem(self.edge, false);\n      self.edge = null;\n      self.addingEdge = false;\n    }\n  },\n  onKeyDown: function onKeyDown(e) {\n    var self = this;\n    var code = e.key;\n\n    if (!code) {\n      return;\n    }\n\n    if (code.toLowerCase() === self.key.toLowerCase()) {\n      self.keydown = true;\n    } else {\n      self.keydown = false;\n    }\n  },\n  onKeyUp: function onKeyUp() {\n    var self = this;\n\n    if (self.addingEdge && self.edge) {\n      // 清除正在增加的边\n      self.graph.removeItem(self.edge, false);\n      self.addingEdge = false;\n      self.edge = null;\n    }\n\n    this.keydown = false;\n  }\n};"]},"metadata":{},"sourceType":"module"}