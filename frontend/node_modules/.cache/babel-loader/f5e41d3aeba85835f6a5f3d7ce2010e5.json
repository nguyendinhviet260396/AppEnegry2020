{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService } from '@progress/kendo-react-intl';\nimport { loadTheme } from './theming/theme-service';\nimport createStore from './store/store';\nimport { themeReducer, observersReducer } from './store/reducer';\nimport { isOptionsChanged } from './utils/common';\nimport { canUseDOM } from '@progress/kendo-react-common';\nimport { GaugeContext } from './GaugeContext';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { packageMetadata } from './package-metadata';\n/**\n * @hidden\n */\n\nvar BaseGauge =\n/** @class */\nfunction (_super) {\n  __extends(BaseGauge, _super);\n\n  function BaseGauge(props) {\n    var _this = _super.call(this, props) || this;\n    /**\n     * @hidden\n     */\n\n\n    _this.gaugeInstance = null;\n    _this._element = null;\n    _this.themeStore = {};\n    _this.themeUnsubscriber = Function.prototype;\n    _this.observersStore = {};\n    /* DOM event handlers */\n\n    /**\n     * @hidden\n     */\n\n    _this.onWindowResize = function () {\n      if (_this.gaugeInstance !== null) {\n        _this.gaugeInstance.resize();\n\n        _this.trigger('render', {\n          sender: _this\n        });\n      }\n    };\n\n    validatePackage(packageMetadata);\n    _this.themeStore = createStore(themeReducer);\n    _this.observersStore = createStore(observersReducer);\n    _this.contextValue = {\n      observersStore: _this.observersStore\n    };\n    return _this;\n  }\n\n  Object.defineProperty(BaseGauge.prototype, \"element\", {\n    /**\n     * @hidden\n     */\n    get: function () {\n      return this._element;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\n   * @hidden\n   */\n\n  BaseGauge.prototype.componentDidMount = function () {\n    loadTheme(this.themeStore, this.instantiateCoreGauge.bind(this));\n    this.themeUnsubscriber = this.themeStore.subscribe(this.refresh.bind(this));\n    window.addEventListener('resize', this.onWindowResize);\n    this.trigger('render', {\n      sender: this\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.componentDidUpdate = function (prevProps) {\n    var _a = this.props,\n        dir = _a.dir,\n        children = _a.children,\n        deriveOptionsFromParent = _a.deriveOptionsFromParent,\n        getTarget = _a.getTarget,\n        gaugeConstructor = _a.gaugeConstructor,\n        wrapperClassName = _a.wrapperClassName,\n        renderAs = _a.renderAs,\n        currentOthers = __rest(_a, [\"dir\", \"children\", \"deriveOptionsFromParent\", \"getTarget\", \"gaugeConstructor\", \"wrapperClassName\", \"renderAs\"]);\n\n    var prevDir = prevProps.dir,\n        prevChildren = prevProps.children,\n        prevDeriveOptionsFromParent = prevProps.deriveOptionsFromParent,\n        prevGetTarget = prevProps.getTarget,\n        prevGaugeConstructor = prevProps.gaugeConstructor,\n        prevWrapperClassName = prevProps.wrapperClassName,\n        prevRenderAs = prevProps.renderAs,\n        prevOthers = __rest(prevProps, [\"dir\", \"children\", \"deriveOptionsFromParent\", \"getTarget\", \"gaugeConstructor\", \"wrapperClassName\", \"renderAs\"]);\n\n    if (this.gaugeInstance !== null) {\n      var currentIntlService = provideIntlService(this);\n      var gaugeService = this.gaugeInstance.contextService;\n      var localeChanged = currentIntlService.locale !== gaugeService._intlService.locale;\n      var optionsChanged = isOptionsChanged(prevOthers, currentOthers);\n      var typedCurrentOthers = currentOthers;\n\n      if (localeChanged) {\n        this.gaugeInstance.contextService._intlService = currentIntlService;\n        this.gaugeInstance.contextService.format._intlService = currentIntlService;\n\n        if (!optionsChanged) {\n          this.gaugeInstance.noTransitionsRedraw();\n        }\n      }\n\n      if (optionsChanged || (renderAs || 'svg') !== (prevRenderAs || 'svg')) {\n        this.refresh();\n      } else {\n        if (Object.keys(currentOthers).indexOf('pointer') > -1) {\n          var isPointerArray = Array.isArray(typedCurrentOthers.pointer);\n\n          if (isPointerArray) {\n            this.refreshAllValues(typedCurrentOthers.pointer.map(function (item) {\n              return item.value;\n            }));\n          } else {\n            this.refreshValue((typedCurrentOthers.pointer || {}).value);\n          }\n        } else {\n          this.refreshValue(typedCurrentOthers.value);\n        }\n      }\n\n      if (prevProps.dir !== dir) {\n        this.gaugeInstance.setDirection(this.getDirection(dir));\n      }\n\n      this.trigger('render', {\n        sender: this\n      });\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.componentWillUnmount = function () {\n    this.themeUnsubscriber();\n\n    if (this.gaugeInstance !== null) {\n      this.gaugeInstance.destroy();\n      this.gaugeInstance = null;\n    }\n\n    window.removeEventListener('resize', this.onWindowResize);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.render = function () {\n    var _this = this;\n\n    var _a = this.props,\n        _b = _a.style,\n        style = _b === void 0 ? {} : _b,\n        wrapperClassName = _a.wrapperClassName,\n        children = _a.children;\n    var gaugeStyles = Object.assign({}, style, {\n      position: 'relative'\n    });\n    return React.createElement(GaugeContext.Provider, {\n      value: this.contextValue\n    }, React.createElement(\"div\", {\n      style: gaugeStyles,\n      ref: function (el) {\n        return _this._element = el;\n      },\n      className: wrapperClassName\n    }, children));\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.instantiateCoreGauge = function () {\n    var _a = this.props,\n        dir = _a.dir,\n        gaugeConstructor = _a.gaugeConstructor;\n    var gaugeOptions = this.getGaugeOptions();\n    this.gaugeInstance = new gaugeConstructor(this.element, gaugeOptions, this.themeStore.getState(), {\n      rtl: this.getDirection(dir),\n      intlService: provideIntlService(this),\n      sender: this\n    });\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.refresh = function () {\n    if (this.gaugeInstance !== null) {\n      var themeOptions = this.themeStore.getState();\n      var gaugeOptions = this.getGaugeOptions();\n      this.gaugeInstance.setOptions(gaugeOptions, themeOptions);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.refreshValue = function (value) {\n    this.gaugeInstance.value(value);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.refreshAllValues = function (values) {\n    this.gaugeInstance.allValues(values);\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.getDirection = function (dir) {\n    var _this = this;\n\n    var directionFromWindow = function () {\n      return canUseDOM && window.getComputedStyle(_this.element).direction;\n    };\n\n    var direction = dir !== undefined ? dir : directionFromWindow() || 'ltr';\n    return direction === 'rtl';\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.getGaugeOptions = function () {\n    var _a = this.props,\n        renderAs = _a.renderAs,\n        transitions = _a.transitions,\n        deriveOptionsFromParent = _a.deriveOptionsFromParent;\n    var gaugeOptions = Object.assign({\n      renderAs: renderAs,\n      transitions: transitions\n    });\n\n    if (deriveOptionsFromParent) {\n      // Add options from parent - required by TS\n      gaugeOptions = deriveOptionsFromParent(gaugeOptions);\n    }\n\n    return gaugeOptions;\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.prototype.trigger = function (name, e) {\n    var observers = this.observersStore.getState();\n\n    for (var idx = 0; idx < observers.length; idx++) {\n      observers[idx].trigger(name, e);\n    }\n  };\n  /**\n   * @hidden\n   */\n\n\n  BaseGauge.propTypes = {\n    dir: PropTypes.string,\n    renderAs: PropTypes.oneOf(['svg', 'canvas'])\n  };\n  /**\n   * @hidden\n   */\n\n  BaseGauge.defaultProps = {\n    renderAs: 'svg'\n  };\n  return BaseGauge;\n}(React.Component);\n\nexport { BaseGauge };\nregisterForIntl(BaseGauge);","map":{"version":3,"sources":["../../src/BaseGauge.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { registerForIntl, provideIntlService } from '@progress/kendo-react-intl';\nimport { loadTheme } from './theming/theme-service';\nimport createStore from './store/store';\nimport { themeReducer, observersReducer } from './store/reducer';\nimport { isOptionsChanged } from './utils/common';\nimport { canUseDOM } from '@progress/kendo-react-common';\nimport { GaugeContext } from './GaugeContext';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { packageMetadata } from './package-metadata';\n/**\n * @hidden\n */\nvar BaseGauge = /** @class */ (function (_super) {\n    __extends(BaseGauge, _super);\n    function BaseGauge(props) {\n        var _this = _super.call(this, props) || this;\n        /**\n         * @hidden\n         */\n        _this.gaugeInstance = null;\n        _this._element = null;\n        _this.themeStore = {};\n        _this.themeUnsubscriber = Function.prototype;\n        _this.observersStore = {};\n        /* DOM event handlers */\n        /**\n         * @hidden\n         */\n        _this.onWindowResize = function () {\n            if (_this.gaugeInstance !== null) {\n                _this.gaugeInstance.resize();\n                _this.trigger('render', { sender: _this });\n            }\n        };\n        validatePackage(packageMetadata);\n        _this.themeStore = createStore(themeReducer);\n        _this.observersStore = createStore(observersReducer);\n        _this.contextValue = {\n            observersStore: _this.observersStore\n        };\n        return _this;\n    }\n    Object.defineProperty(BaseGauge.prototype, \"element\", {\n        /**\n         * @hidden\n         */\n        get: function () {\n            return this._element;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.componentDidMount = function () {\n        loadTheme(this.themeStore, this.instantiateCoreGauge.bind(this));\n        this.themeUnsubscriber = this.themeStore.subscribe(this.refresh.bind(this));\n        window.addEventListener('resize', this.onWindowResize);\n        this.trigger('render', { sender: this });\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.componentDidUpdate = function (prevProps) {\n        var _a = this.props, dir = _a.dir, children = _a.children, deriveOptionsFromParent = _a.deriveOptionsFromParent, getTarget = _a.getTarget, gaugeConstructor = _a.gaugeConstructor, wrapperClassName = _a.wrapperClassName, renderAs = _a.renderAs, currentOthers = __rest(_a, [\"dir\", \"children\", \"deriveOptionsFromParent\", \"getTarget\", \"gaugeConstructor\", \"wrapperClassName\", \"renderAs\"]);\n        var prevDir = prevProps.dir, prevChildren = prevProps.children, prevDeriveOptionsFromParent = prevProps.deriveOptionsFromParent, prevGetTarget = prevProps.getTarget, prevGaugeConstructor = prevProps.gaugeConstructor, prevWrapperClassName = prevProps.wrapperClassName, prevRenderAs = prevProps.renderAs, prevOthers = __rest(prevProps, [\"dir\", \"children\", \"deriveOptionsFromParent\", \"getTarget\", \"gaugeConstructor\", \"wrapperClassName\", \"renderAs\"]);\n        if (this.gaugeInstance !== null) {\n            var currentIntlService = provideIntlService(this);\n            var gaugeService = this.gaugeInstance.contextService;\n            var localeChanged = currentIntlService.locale !== gaugeService._intlService.locale;\n            var optionsChanged = isOptionsChanged(prevOthers, currentOthers);\n            var typedCurrentOthers = currentOthers;\n            if (localeChanged) {\n                this.gaugeInstance.contextService._intlService = currentIntlService;\n                this.gaugeInstance.contextService.format._intlService = currentIntlService;\n                if (!optionsChanged) {\n                    this.gaugeInstance.noTransitionsRedraw();\n                }\n            }\n            if (optionsChanged ||\n                (renderAs || 'svg') !== (prevRenderAs || 'svg')) {\n                this.refresh();\n            }\n            else {\n                if (Object.keys(currentOthers).indexOf('pointer') > -1) {\n                    var isPointerArray = Array.isArray(typedCurrentOthers.pointer);\n                    if (isPointerArray) {\n                        this.refreshAllValues(typedCurrentOthers.pointer.map(function (item) { return item.value; }));\n                    }\n                    else {\n                        this.refreshValue((typedCurrentOthers.pointer || {}).value);\n                    }\n                }\n                else {\n                    this.refreshValue(typedCurrentOthers.value);\n                }\n            }\n            if (prevProps.dir !== dir) {\n                this.gaugeInstance.setDirection(this.getDirection(dir));\n            }\n            this.trigger('render', { sender: this });\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.componentWillUnmount = function () {\n        this.themeUnsubscriber();\n        if (this.gaugeInstance !== null) {\n            this.gaugeInstance.destroy();\n            this.gaugeInstance = null;\n        }\n        window.removeEventListener('resize', this.onWindowResize);\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.render = function () {\n        var _this = this;\n        var _a = this.props, _b = _a.style, style = _b === void 0 ? {} : _b, wrapperClassName = _a.wrapperClassName, children = _a.children;\n        var gaugeStyles = Object.assign({}, style, { position: 'relative' });\n        return (React.createElement(GaugeContext.Provider, { value: this.contextValue },\n            React.createElement(\"div\", { style: gaugeStyles, ref: function (el) { return _this._element = el; }, className: wrapperClassName }, children)));\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.instantiateCoreGauge = function () {\n        var _a = this.props, dir = _a.dir, gaugeConstructor = _a.gaugeConstructor;\n        var gaugeOptions = this.getGaugeOptions();\n        this.gaugeInstance = new gaugeConstructor(this.element, gaugeOptions, this.themeStore.getState(), {\n            rtl: this.getDirection(dir),\n            intlService: provideIntlService(this),\n            sender: this\n        });\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.refresh = function () {\n        if (this.gaugeInstance !== null) {\n            var themeOptions = this.themeStore.getState();\n            var gaugeOptions = this.getGaugeOptions();\n            this.gaugeInstance.setOptions(gaugeOptions, themeOptions);\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.refreshValue = function (value) {\n        this.gaugeInstance.value(value);\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.refreshAllValues = function (values) {\n        this.gaugeInstance.allValues(values);\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.getDirection = function (dir) {\n        var _this = this;\n        var directionFromWindow = function () { return canUseDOM && window.getComputedStyle(_this.element).direction; };\n        var direction = dir !== undefined ? dir : (directionFromWindow() || 'ltr');\n        return direction === 'rtl';\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.getGaugeOptions = function () {\n        var _a = this.props, renderAs = _a.renderAs, transitions = _a.transitions, deriveOptionsFromParent = _a.deriveOptionsFromParent;\n        var gaugeOptions = Object.assign({\n            renderAs: renderAs,\n            transitions: transitions\n        });\n        if (deriveOptionsFromParent) {\n            // Add options from parent - required by TS\n            gaugeOptions = deriveOptionsFromParent(gaugeOptions);\n        }\n        return gaugeOptions;\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.prototype.trigger = function (name, e) {\n        var observers = this.observersStore.getState();\n        for (var idx = 0; idx < observers.length; idx++) {\n            observers[idx].trigger(name, e);\n        }\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.propTypes = {\n        dir: PropTypes.string,\n        renderAs: PropTypes.oneOf(['svg', 'canvas'])\n    };\n    /**\n     * @hidden\n     */\n    BaseGauge.defaultProps = {\n        renderAs: 'svg'\n    };\n    return BaseGauge;\n}(React.Component));\nexport { BaseGauge };\nregisterForIntl(BaseGauge);\n//# sourceMappingURL=BaseGauge.js.map"]},"metadata":{},"sourceType":"module"}