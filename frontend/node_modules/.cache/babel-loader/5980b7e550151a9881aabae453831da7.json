{"ast":null,"code":"import { assign, each, wrapBehavior } from '@antv/util';\nvar EVENT_TYPES = ['start', 'process', 'end', 'reset'];\n\nvar Interaction =\n/** @class */\nfunction () {\n  function Interaction(cfg) {\n    var defaultCfg = this.getDefaultCfg();\n    assign(this, defaultCfg, cfg);\n    this.canvas = this.view.canvas;\n    this._eventHandlers = [];\n\n    this._bindEvents();\n  }\n\n  Interaction.prototype.getDefaultCfg = function () {\n    return {\n      startEvent: 'mousedown',\n      processEvent: 'mousemove',\n      endEvent: 'mouseup',\n      resetEvent: 'dblclick'\n    };\n  };\n\n  Interaction.prototype._start = function (ev) {\n    this.preStart(ev);\n    this.start(ev);\n    this.afterStart(ev);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.preStart = function (ev) {\n    return;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.afterStart = function (ev) {\n    return;\n  };\n\n  Interaction.prototype._process = function (ev) {\n    this.preProcess(ev);\n    this.process(ev);\n    this.afterProcess(ev);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.preProcess = function (ev) {\n    return;\n  }; //eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.process = function (ev) {\n    return;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.afterProcess = function (ev) {\n    return;\n  };\n\n  Interaction.prototype._end = function (ev) {\n    this.preEnd(ev);\n    this.end(ev);\n    this.afterEnd(ev);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.preEnd = function (ev) {\n    return;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.end = function (ev) {\n    return;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.afterEnd = function (ev) {\n    return;\n  };\n\n  Interaction.prototype._reset = function (ev) {\n    this.preReset(ev);\n    this.reset(ev);\n    this.afterReset(ev);\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.preReset = function (ev) {\n    return;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.reset = function (ev) {\n    return;\n  }; // eslint-disable-next-line @typescript-eslint/no-unused-vars\n\n\n  Interaction.prototype.afterReset = function (ev) {\n    return;\n  };\n\n  Interaction.prototype._bindEvents = function () {\n    var _this = this;\n\n    each(EVENT_TYPES, function (type) {\n      var eventName = _this[type + \"Event\"];\n      var handler = wrapBehavior(_this, \"_\" + type);\n\n      _this.view.on(eventName, handler);\n\n      _this._eventHandlers.push({\n        type: eventName,\n        handler: handler\n      });\n    });\n  };\n\n  Interaction.prototype._unbindEvents = function () {\n    var _this = this;\n\n    var eventHandlers = this._eventHandlers;\n    each(eventHandlers, function (eh) {\n      _this.view.off(eh.type, eh.handler);\n    });\n  };\n\n  Interaction.prototype.destroy = function () {\n    this._unbindEvents();\n\n    this._reset();\n  };\n\n  return Interaction;\n}();\n\nexport default Interaction;","map":{"version":3,"sources":["../../src/interaction/core.ts"],"names":[],"mappings":"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","sourcesContent":["import { assign, each, wrapBehavior } from '@antv/util';\nimport { View, ICanvas } from '../dependents';\n\ninterface InteractionCfg {\n  view: View;\n  startEvent?: string;\n  processEvent?: string;\n  endEvent?: string;\n  resetEvent?: string;\n}\n\nexport interface InteractionConstructor {\n  new (cfg: any): Interaction;\n}\n\nconst EVENT_TYPES = ['start', 'process', 'end', 'reset'];\n\nexport default abstract class Interaction {\n  view: View;\n  protected canvas: ICanvas;\n  startEvent: string;\n  processEvent: string;\n  endEvent: string;\n  resetEvent: string;\n  private _eventHandlers: any[];\n  constructor(cfg: InteractionCfg) {\n    const defaultCfg = this.getDefaultCfg();\n    assign(this, defaultCfg, cfg);\n    this.canvas = this.view.canvas;\n    this._eventHandlers = [];\n    this._bindEvents();\n  }\n\n  protected getDefaultCfg() {\n    return {\n      startEvent: 'mousedown',\n      processEvent: 'mousemove',\n      endEvent: 'mouseup',\n      resetEvent: 'dblclick',\n    };\n  }\n\n  private _start(ev) {\n    this.preStart(ev);\n    this.start(ev);\n    this.afterStart(ev);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected preStart(ev): void {\n    return;\n  }\n\n  protected abstract start(ev): void;\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected afterStart(ev): void {\n    return;\n  }\n\n  private _process(ev) {\n    this.preProcess(ev);\n    this.process(ev);\n    this.afterProcess(ev);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected preProcess(ev): void {\n    return;\n  }\n\n  //eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected process(ev): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected afterProcess(ev): void {\n    return;\n  }\n\n  private _end(ev) {\n    this.preEnd(ev);\n    this.end(ev);\n    this.afterEnd(ev);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected preEnd(ev): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected end(ev): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected afterEnd(ev): void {\n    return;\n  }\n\n  private _reset(ev?: any) {\n    this.preReset(ev);\n    this.reset(ev);\n    this.afterReset(ev);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected preReset(ev?: any): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected reset(ev?: any): void {\n    return;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected afterReset(ev?: any): void {\n    return;\n  }\n\n  private _bindEvents() {\n    each(EVENT_TYPES, (type) => {\n      const eventName = this[`${type}Event`];\n      const handler = wrapBehavior(this, `_${type}`);\n      this.view.on(eventName, handler);\n      this._eventHandlers.push({ type: eventName, handler });\n    });\n  }\n\n  private _unbindEvents() {\n    const eventHandlers = this._eventHandlers;\n    each(eventHandlers, (eh) => {\n      this.view.off(eh.type, eh.handler);\n    });\n  }\n\n  public destroy() {\n    this._unbindEvents();\n    this._reset();\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}