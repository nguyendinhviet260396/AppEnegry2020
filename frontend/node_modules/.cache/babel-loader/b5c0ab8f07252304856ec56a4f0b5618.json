{"ast":null,"code":"import { fork, take, call, put, delay, takeLatest, select } from 'redux-saga/effects'; //select to listTask from store\n\nimport * as alarmTypes from './../constants/alarm';\nimport * as authTypes from './../constants/auths';\nimport * as deviceTypes from './../constants/devices';\nimport { getListAlarm } from './../apis/alarm';\nimport { getListUser, addUser, loginUser, deteleUser, updateUser } from './../apis/auth';\nimport { getListData, updateData, addData } from './../apis/devices';\nimport { STATUS_CODE } from './../constants/index';\nimport { showLoading, hideLoading } from './../actions/ui';\nimport { hideModal } from './../actions/modal';\nimport { fetchListAlarm, fetchListAlarmSuccess, fetchListAlarmFailed } from './../actions/alarm';\nimport { authSignupSuccess, authSignupFaild, authLoginSuccess, authLoginFaild, checkAuthFaild, checkAuthSuccess, fetchListUserFailed, fetchListUserSuccess, setUserDeleteSucces, setUserDeleteFaild, updateUserSuccess, updateUserFailed } from './../actions/auths';\nimport { refeshTempHumiFailed, refeshTempHumiSuccess, refeshPMUSuccess, refeshPMUFailed, refeshPMUPOWERSuccess, refeshPMUPOWERFailed, refeshAIRSuccess, refeshAIRFailed, refeshAIRPOWERSuccess, refeshAIRPOWERFailed, refeshAIRSETTINGSuccess, refeshAIRSETTINGFailed, refeshAIRTEMPSuccess, refeshAIRTEMPFailed, refeshUPSSuccess, refeshUPSFailed, refeshUPSPOWERSuccess, refeshUPSPOWERFailed, refeshPDUSuccess, refeshPDUFailed, refeshPDUPOWERSuccess, refeshPDUPOWERFailed, refeshLEAKSuccess, refeshLEAKFailed, refeshSMOKESuccess, refeshSMOKEFailed, refeshDOORSuccess, refeshDOORFailed, refeshFANSuccess, refeshFANFailed, controlFANSuccess, controlFANFailed } from '../actions/devices';\n/**\r\n * B1: dispatch action fetchTask\r\n * B2:Call animationPlayState: \r\n * B3:Kiểm tra status_code\r\n * Nếu thành công thì thực thi ...\r\n * Nếu thất bại thì thực thi gì đó....button-big\r\n * B4:Tắt Loadding\r\n * B5:thực thi công việc tiếp theo...\r\n */\n\nfunction* watchFetchListAlarmAction() {\n  while (true) {\n    const action = yield take(alarmTypes.FETCH_ALARM); // khi FETCH_TASK duoc dispatch thi code tu day tro xuong moi chay\n\n    yield put(showLoading());\n    const {\n      params\n    } = action.payload;\n    console.log(params);\n    const resp = yield call(getListAlarm, 'api/v1/main/getalarm', 'alarm');\n    const {\n      status,\n      data\n    } = resp;\n\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put(fetchListAlarmSuccess(data));\n    } else {\n      yield put(fetchListAlarmFailed(data));\n    }\n\n    yield delay(100);\n    yield put(hideLoading());\n  }\n}\n\nfunction* filterAlarmSaga({\n  payload\n}) {\n  yield delay(500);\n  const {\n    keyword\n  } = payload;\n  console.log(keyword.type);\n  yield put(fetchListAlarm({\n    //filter:keyword.charAt(0).toUpperCase() + keyword.slice(1),// mockAPI\n    q: keyword.devicename //json-server\n\n  }));\n}\n\nfunction* loginSaga({\n  payload\n}) {\n  const {\n    email,\n    password\n  } = payload;\n  yield put(showLoading());\n  const resp = yield call(loginUser, 'api/v1/users/login', {\n    email,\n    password\n  });\n  const {\n    data,\n    status\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS) {\n    console.log(data);\n    yield put(authLoginSuccess(data));\n    yield put(checkAuthSuccess());\n  } else {\n    yield put(checkAuthFaild());\n    yield put(authLoginFaild(data));\n  }\n\n  yield delay(200);\n  yield put(hideLoading());\n}\n\nfunction* signupSaga({\n  payload\n}) {\n  const {\n    name,\n    email,\n    password,\n    operator\n  } = payload;\n  yield put(showLoading());\n  const resp = yield call(addUser, 'api/v1/users/add', {\n    name,\n    email,\n    password,\n    operator\n  });\n  const {\n    data,\n    status\n  } = resp;\n\n  if (status === STATUS_CODE.CREATED) {\n    const resp = yield call(getListUser, 'api/v1/users/', '');\n    const {\n      status,\n      data\n    } = resp;\n    yield delay(100);\n\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put(authSignupSuccess(data));\n      yield put(hideModal());\n    }\n  } else {\n    yield put(authSignupFaild(data));\n  }\n\n  yield delay(100);\n  yield put(hideLoading());\n}\n\nfunction* updateUserSaga({\n  payload\n}) {\n  const {\n    name,\n    email,\n    password,\n    operator\n  } = payload;\n  const userEditting = yield select(state => state.auth.userEditting);\n  const {\n    id\n  } = userEditting;\n  yield put(showLoading());\n  const resp = yield call(updateUser, 'api/v1/users/update', {\n    id,\n    name,\n    email,\n    password,\n    operator\n  });\n  const {\n    data,\n    status\n  } = resp;\n\n  if (status === STATUS_CODE.UPDATED) {\n    const resp = yield call(getListUser, 'api/v1/users', '');\n    const {\n      status,\n      data\n    } = resp;\n    yield delay(100);\n\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put(updateUserSuccess(data));\n      yield put(hideModal());\n    }\n  } else {\n    yield put(updateUserFailed(data));\n  }\n\n  yield delay(100);\n  yield put(hideLoading());\n}\n\nfunction* watchFetchListUserAction() {\n  while (true) {\n    const action = yield take(authTypes.FETCH_USER); // khi FETCH_TASK duoc dispatch thi code tu day tro xuong moi chay\n\n    yield put(showLoading());\n    const {\n      params\n    } = action.payload;\n    const resp = yield call(getListUser, 'api/v1/users/', params);\n    const {\n      status,\n      data\n    } = resp;\n\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put(fetchListUserSuccess(data));\n    } else {\n      yield put(fetchListUserFailed(data));\n    }\n\n    yield delay(50);\n    yield put(hideLoading());\n  }\n}\n\nfunction* deleteUserSaga({\n  payload\n}) {\n  const {\n    id\n  } = payload;\n  yield put(showLoading());\n  const reps = yield call(deteleUser, 'api/v1/users', id);\n  const {\n    data,\n    status\n  } = reps;\n\n  if (status === STATUS_CODE.NO_CONTENT) {\n    const resp = yield call(getListUser, 'api/v1/users', '');\n    const {\n      status,\n      data\n    } = resp;\n    yield delay(100);\n\n    if (status === STATUS_CODE.SUCCESS) {\n      yield put(setUserDeleteSucces(data));\n      yield put(hideModal());\n    }\n  } else {\n    yield put(setUserDeleteFaild(data));\n  }\n\n  yield delay(100);\n  yield put(hideLoading());\n} // refesh data temphumi\n\n\nfunction* refeshDataSaga() {\n  const resp = yield call(getListData, 'api/v1/temphumi/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshTempHumiSuccess(data));\n  } else {\n    yield put(refeshTempHumiFailed(data));\n  }\n} // refesh data pmu\n\n\nfunction* refeshPmuSaga() {\n  const resp = yield call(getListData, 'api/v1/pmu/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshPMUSuccess(data));\n  } else {\n    yield put(refeshPMUFailed(data));\n  }\n} // refesh data pmu power\n\n\nfunction* refeshPmuPowerSaga() {\n  const resp = yield call(getListData, 'api/v1/pmu/getlast5min', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshPMUPOWERSuccess(data));\n  } else {\n    yield put(refeshPMUPOWERFailed(data));\n  }\n} // refesh data air\n\n\nfunction* refeshAirSaga() {\n  const resp = yield call(getListData, 'api/v1/air/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshAIRSuccess(data));\n  } else {\n    yield put(refeshAIRFailed(data));\n  }\n} // refesh data air power\n\n\nfunction* refeshAirPowerSaga() {\n  const resp = yield call(getListData, 'api/v1/air/getlast5min', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshAIRPOWERSuccess(data));\n  } else {\n    yield put(refeshAIRPOWERFailed(data));\n  }\n} // refesh data air setting\n\n\nfunction* refeshAirSettingSaga({\n  payload\n}) {\n  const {\n    params\n  } = payload;\n  const resp = yield call(updateData, 'api/v1/air/setting', params);\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.UPDATED) {\n    yield put(refeshAIRSETTINGSuccess(data));\n  } else {\n    yield put(refeshAIRSETTINGFailed(data));\n  }\n} // refesh data air temp trend\n\n\nfunction* refeshAirTempSaga() {\n  const resp = yield call(getListData, 'api/v1/air/gettemp5min', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshAIRTEMPSuccess(data));\n  } else {\n    yield put(refeshAIRTEMPFailed(data));\n  }\n} // refesh data UPS\n\n\nfunction* refeshUpsSaga() {\n  const resp = yield call(getListData, 'api/v1/ups/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshUPSSuccess(data));\n  } else {\n    yield put(refeshUPSFailed(data));\n  }\n} // refesh data UPS power\n\n\nfunction* refeshUpsPowerSaga() {\n  const resp = yield call(getListData, 'api/v1/ups/getlast15min', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshUPSPOWERSuccess(data));\n  } else {\n    yield put(refeshUPSPOWERFailed(data));\n  }\n} // refesh data pdu\n\n\nfunction* refeshPduSaga() {\n  const resp = yield call(getListData, 'api/v1/pdu/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshPDUSuccess(data));\n  } else {\n    yield put(refeshPDUFailed(data));\n  }\n} // refesh data pdu power\n\n\nfunction* refeshPduPowerSaga() {\n  const resp = yield call(getListData, 'api/v1/pdu/gelast5min', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshPDUPOWERSuccess(data));\n  } else {\n    yield put(refeshPDUPOWERFailed(data));\n  }\n} // refesh data leak\n\n\nfunction* refeshLeakSaga() {\n  const resp = yield call(getListData, 'api/v1/leak/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshLEAKSuccess(data));\n  } else {\n    yield put(refeshLEAKFailed(data));\n  }\n} // refesh data door\n\n\nfunction* refeshDoorSaga() {\n  const resp = yield call(getListData, 'api/v1/door/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshDOORSuccess(data));\n  } else {\n    yield put(refeshDOORFailed(data));\n  }\n} // refesh data smoke\n\n\nfunction* refeshSmokeSaga() {\n  const resp = yield call(getListData, 'api/v1/smoke/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshSMOKESuccess(data));\n  } else {\n    yield put(refeshSMOKEFailed(data));\n  }\n} // refesh data fan\n\n\nfunction* refeshFanSaga() {\n  const resp = yield call(getListData, 'api/v1/fan/getlast', '');\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS && data.lenght !== 0) {\n    yield put(refeshFANSuccess(data));\n  } else {\n    yield put(refeshFANFailed(data));\n  }\n} //refesh data fan\n\n\nfunction* controlFanSaga({\n  payload\n}) {\n  const resp = yield call(addData, 'api/v1/fan/control', payload);\n  const {\n    status,\n    data\n  } = resp;\n\n  if (status === STATUS_CODE.SUCCESS) {\n    yield put(controlFANSuccess(data));\n  } else {\n    yield put(controlFANFailed(data));\n  }\n} // refesh data leak\n\n\nfunction* refeshAllArea() {// const resp = yield call(getListData,'api/v1/leak/getlast','');\n  // const {status,data}= resp;\n  // if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\n  //     yield put(refeshLEAKSuccess(data));  \n  // }else{\n  //     yield put(refeshLEAKFailed(data));\n  // }\n}\n\nfunction* rootSaga() {\n  yield fork(watchFetchListAlarmAction);\n  yield fork(watchFetchListUserAction);\n  yield takeLatest(alarmTypes.FILTER_ALARM, filterAlarmSaga);\n  yield takeLatest(authTypes.AUTH_LOGIN, loginSaga);\n  yield takeLatest(authTypes.AUTH_SIGNUP, signupSaga);\n  yield takeLatest(authTypes.SET_USER_DELETE, deleteUserSaga);\n  yield takeLatest(authTypes.UPDATE_USER, updateUserSaga);\n  yield takeLatest(deviceTypes.REFESH_TEMPHUMI, refeshDataSaga);\n  yield takeLatest(deviceTypes.REFESH_PMU, refeshPmuSaga);\n  yield takeLatest(deviceTypes.REFESH_AIR, refeshAirSaga);\n  yield takeLatest(deviceTypes.REFESH_UPS, refeshUpsSaga);\n  yield takeLatest(deviceTypes.REFESH_PDU, refeshPduSaga);\n  yield takeLatest(deviceTypes.REFESH_DOOR, refeshDoorSaga);\n  yield takeLatest(deviceTypes.REFESH_LEAK, refeshLeakSaga);\n  yield takeLatest(deviceTypes.REFESH_SMOKE, refeshSmokeSaga);\n  yield takeLatest(deviceTypes.REFESH_FAN, refeshFanSaga);\n  yield takeLatest(deviceTypes.CONTROL_FAN, controlFanSaga);\n  yield takeLatest(deviceTypes.REFESH_UPSPOWER, refeshUpsPowerSaga);\n  yield takeLatest(deviceTypes.REFESH_PDUPOWER, refeshPduPowerSaga);\n  yield takeLatest(deviceTypes.REFESH_PMUPOWER, refeshPmuPowerSaga);\n  yield takeLatest(deviceTypes.REFESH_AIRPOWER, refeshAirPowerSaga);\n  yield takeLatest(deviceTypes.REFESH_AIRSETTING, refeshAirSettingSaga);\n  yield takeLatest(deviceTypes.REFESH_AIRTEMP, refeshAirTempSaga);\n  yield take;\n}\n\nexport default rootSaga;","map":{"version":3,"sources":["C:/Users/vietn/Desktop/AppEnegry2020/frontend/src/sagas/index.js"],"names":["fork","take","call","put","delay","takeLatest","select","alarmTypes","authTypes","deviceTypes","getListAlarm","getListUser","addUser","loginUser","deteleUser","updateUser","getListData","updateData","addData","STATUS_CODE","showLoading","hideLoading","hideModal","fetchListAlarm","fetchListAlarmSuccess","fetchListAlarmFailed","authSignupSuccess","authSignupFaild","authLoginSuccess","authLoginFaild","checkAuthFaild","checkAuthSuccess","fetchListUserFailed","fetchListUserSuccess","setUserDeleteSucces","setUserDeleteFaild","updateUserSuccess","updateUserFailed","refeshTempHumiFailed","refeshTempHumiSuccess","refeshPMUSuccess","refeshPMUFailed","refeshPMUPOWERSuccess","refeshPMUPOWERFailed","refeshAIRSuccess","refeshAIRFailed","refeshAIRPOWERSuccess","refeshAIRPOWERFailed","refeshAIRSETTINGSuccess","refeshAIRSETTINGFailed","refeshAIRTEMPSuccess","refeshAIRTEMPFailed","refeshUPSSuccess","refeshUPSFailed","refeshUPSPOWERSuccess","refeshUPSPOWERFailed","refeshPDUSuccess","refeshPDUFailed","refeshPDUPOWERSuccess","refeshPDUPOWERFailed","refeshLEAKSuccess","refeshLEAKFailed","refeshSMOKESuccess","refeshSMOKEFailed","refeshDOORSuccess","refeshDOORFailed","refeshFANSuccess","refeshFANFailed","controlFANSuccess","controlFANFailed","watchFetchListAlarmAction","action","FETCH_ALARM","params","payload","console","log","resp","status","data","SUCCESS","filterAlarmSaga","keyword","type","q","devicename","loginSaga","email","password","signupSaga","name","operator","CREATED","updateUserSaga","userEditting","state","auth","id","UPDATED","watchFetchListUserAction","FETCH_USER","deleteUserSaga","reps","NO_CONTENT","refeshDataSaga","lenght","refeshPmuSaga","refeshPmuPowerSaga","refeshAirSaga","refeshAirPowerSaga","refeshAirSettingSaga","refeshAirTempSaga","refeshUpsSaga","refeshUpsPowerSaga","refeshPduSaga","refeshPduPowerSaga","refeshLeakSaga","refeshDoorSaga","refeshSmokeSaga","refeshFanSaga","controlFanSaga","refeshAllArea","rootSaga","FILTER_ALARM","AUTH_LOGIN","AUTH_SIGNUP","SET_USER_DELETE","UPDATE_USER","REFESH_TEMPHUMI","REFESH_PMU","REFESH_AIR","REFESH_UPS","REFESH_PDU","REFESH_DOOR","REFESH_LEAK","REFESH_SMOKE","REFESH_FAN","CONTROL_FAN","REFESH_UPSPOWER","REFESH_PDUPOWER","REFESH_PMUPOWER","REFESH_AIRPOWER","REFESH_AIRSETTING","REFESH_AIRTEMP"],"mappings":"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","sourcesContent":["import {fork,take,call,put,delay,takeLatest,select} from 'redux-saga/effects';//select to listTask from store\r\nimport * as alarmTypes from './../constants/alarm';\r\nimport * as authTypes from './../constants/auths';\r\nimport * as deviceTypes from './../constants/devices';\r\nimport {\r\n    getListAlarm\r\n    } from './../apis/alarm';\r\nimport {    \r\n    getListUser,\r\n    addUser,\r\n    loginUser,\r\n    deteleUser,     \r\n    updateUser\r\n    } from './../apis/auth';\r\n\r\nimport {getListData,\r\n        updateData,\r\n        addData,\r\n        } from './../apis/devices';\r\nimport {STATUS_CODE} from './../constants/index';\r\nimport {showLoading,hideLoading} from './../actions/ui';\r\nimport {hideModal} from './../actions/modal';\r\nimport {\r\n    fetchListAlarm,\r\n    fetchListAlarmSuccess,\r\n    fetchListAlarmFailed,\r\n    } from './../actions/alarm';\r\nimport {\r\n    authSignupSuccess,\r\n    authSignupFaild,\r\n    authLoginSuccess,\r\n    authLoginFaild,\r\n    checkAuthFaild,\r\n    checkAuthSuccess,\r\n    fetchListUserFailed,\r\n    fetchListUserSuccess,\r\n    setUserDeleteSucces,    \r\n    setUserDeleteFaild,\r\n    updateUserSuccess,\r\n    updateUserFailed\r\n    } from './../actions/auths';\r\nimport { refeshTempHumiFailed,\r\n        refeshTempHumiSuccess,\r\n        refeshPMUSuccess,\r\n        refeshPMUFailed,\r\n        refeshPMUPOWERSuccess,\r\n        refeshPMUPOWERFailed,\r\n        refeshAIRSuccess,\r\n        refeshAIRFailed,\r\n        refeshAIRPOWERSuccess,\r\n        refeshAIRPOWERFailed,\r\n        refeshAIRSETTINGSuccess,\r\n        refeshAIRSETTINGFailed,\r\n        refeshAIRTEMPSuccess,\r\n        refeshAIRTEMPFailed,\r\n        refeshUPSSuccess,\r\n        refeshUPSFailed,\r\n        refeshUPSPOWERSuccess,\r\n        refeshUPSPOWERFailed,\r\n        refeshPDUSuccess,\r\n        refeshPDUFailed,\r\n        refeshPDUPOWERSuccess,\r\n        refeshPDUPOWERFailed,\r\n        refeshLEAKSuccess,\r\n        refeshLEAKFailed,\r\n        refeshSMOKESuccess,\r\n        refeshSMOKEFailed,\r\n        refeshDOORSuccess,\r\n        refeshDOORFailed,\r\n        refeshFANSuccess,\r\n        refeshFANFailed,\r\n        controlFANSuccess,\r\n        controlFANFailed,\r\n\r\n     } from '../actions/devices';\r\n/**\r\n * B1: dispatch action fetchTask\r\n * B2:Call animationPlayState: \r\n * B3:Kiểm tra status_code\r\n * Nếu thành công thì thực thi ...\r\n * Nếu thất bại thì thực thi gì đó....button-big\r\n * B4:Tắt Loadding\r\n * B5:thực thi công việc tiếp theo...\r\n */\r\nfunction* watchFetchListAlarmAction(){\r\n    while (true){\r\n        const action = yield take(alarmTypes.FETCH_ALARM);// khi FETCH_TASK duoc dispatch thi code tu day tro xuong moi chay\r\n        yield put(showLoading());\r\n        const {params}=action.payload;\r\n        console.log(params)\r\n        const resp = yield call(getListAlarm,'api/v1/main/getalarm','alarm');\r\n        const {status,data}= resp;\r\n        if(status === STATUS_CODE.SUCCESS){\r\n            yield put(fetchListAlarmSuccess(data));  \r\n        }else{\r\n            yield put(fetchListAlarmFailed(data));\r\n        }\r\n        yield delay(100);\r\n        yield put(hideLoading());\r\n    } \r\n}\r\n\r\nfunction* filterAlarmSaga({payload}){\r\n    yield delay(500);\r\n    const {keyword} = payload;\r\n    console.log(keyword.type)\r\n    yield put(fetchListAlarm({\r\n        //filter:keyword.charAt(0).toUpperCase() + keyword.slice(1),// mockAPI\r\n        q:keyword.devicename, //json-server\r\n        }),\r\n    );\r\n}\r\n\r\nfunction* loginSaga({payload}){\r\n    const {email,password}= payload;\r\n    yield put(showLoading());\r\n    const resp =yield call(loginUser,'api/v1/users/login',{email,password});\r\n    const{data,status}=resp;\r\n    if(status === STATUS_CODE.SUCCESS){\r\n        console.log(data);\r\n        yield put(authLoginSuccess(data));\r\n        yield put(checkAuthSuccess());\r\n    }else{\r\n        yield put(checkAuthFaild());\r\n        yield put(authLoginFaild(data));\r\n    }\r\n    yield delay(200);\r\n    yield put(hideLoading());\r\n\r\n}\r\nfunction* signupSaga({payload}){\r\n    const {name,email,password,operator}= payload;\r\n    yield put(showLoading());\r\n    const resp = yield call(addUser,'api/v1/users/add',{name,email,password,operator});\r\n    const{data,status}=resp;\r\n    if(status === STATUS_CODE.CREATED ){\r\n        const resp = yield call(getListUser,'api/v1/users/','');\r\n        const {status,data}= resp;\r\n        yield delay(100);\r\n        if(status === STATUS_CODE.SUCCESS){\r\n         yield put(authSignupSuccess(data));\r\n         yield put(hideModal());\r\n        }\r\n    }else{\r\n         yield put(authSignupFaild(data));\r\n    }\r\n    yield delay(100);\r\n    yield put(hideLoading());\r\n}\r\nfunction* updateUserSaga({payload}){\r\n    const {name,email,password,operator}= payload;\r\n    const userEditting = yield select(state => state.auth.userEditting);\r\n    const {id} = userEditting;\r\n    yield put(showLoading());\r\n    const resp = yield call(updateUser,'api/v1/users/update',{id,name,email,password,operator});\r\n    const{data,status}=resp;\r\n    if(status === STATUS_CODE.UPDATED ){\r\n        const resp = yield call(getListUser,'api/v1/users','');\r\n        const {status,data}= resp;\r\n        yield delay(100);\r\n        if(status === STATUS_CODE.SUCCESS){\r\n         yield put(updateUserSuccess(data));\r\n         yield put(hideModal());\r\n        }\r\n    }else {\r\n         yield put(updateUserFailed(data));\r\n         \r\n    }\r\n    yield delay(100);\r\n    yield put(hideLoading());\r\n}\r\nfunction* watchFetchListUserAction(){\r\n    while (true){\r\n        const action = yield take(authTypes.FETCH_USER);// khi FETCH_TASK duoc dispatch thi code tu day tro xuong moi chay\r\n        yield put(showLoading());\r\n        const {params}=action.payload;\r\n        const resp = yield call(getListUser,'api/v1/users/',params);\r\n        const {status,data}= resp;\r\n        if(status === STATUS_CODE.SUCCESS){\r\n            yield put(fetchListUserSuccess(data));  \r\n            \r\n        }else{\r\n            yield put(fetchListUserFailed(data));\r\n        }\r\n        yield delay(50);\r\n        yield put(hideLoading());\r\n    } \r\n}\r\n\r\nfunction* deleteUserSaga({payload}){\r\n    const {id}= payload;\r\n    yield put(showLoading());\r\n    const reps= yield call(deteleUser,'api/v1/users',id);\r\n    const {data,status}=reps;\r\n    if(status === STATUS_CODE.NO_CONTENT){\r\n        const resp = yield call(getListUser,'api/v1/users','');\r\n        const {status,data}= resp;\r\n        yield delay(100);\r\n        if(status === STATUS_CODE.SUCCESS){\r\n            yield put(setUserDeleteSucces(data));\r\n            yield put(hideModal());\r\n        }  \r\n    } else {\r\n        yield put(setUserDeleteFaild(data));\r\n    }\r\n    yield delay(100);\r\n    yield put(hideLoading());\r\n}\r\n// refesh data temphumi\r\nfunction* refeshDataSaga(){\r\n    const resp = yield call(getListData,'api/v1/temphumi/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshTempHumiSuccess(data));  \r\n    }else{\r\n        yield put(refeshTempHumiFailed(data));\r\n    }\r\n}\r\n// refesh data pmu\r\nfunction* refeshPmuSaga(){\r\n    const resp = yield call(getListData,'api/v1/pmu/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshPMUSuccess(data));  \r\n    }else{\r\n        yield put(refeshPMUFailed(data));\r\n    }\r\n    \r\n}\r\n\r\n// refesh data pmu power\r\nfunction* refeshPmuPowerSaga(){\r\n    const resp = yield call(getListData,'api/v1/pmu/getlast5min','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshPMUPOWERSuccess(data));  \r\n    }else{\r\n        yield put(refeshPMUPOWERFailed(data));\r\n    }\r\n    \r\n}\r\n// refesh data air\r\nfunction* refeshAirSaga(){\r\n    const resp = yield call(getListData,'api/v1/air/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshAIRSuccess(data));  \r\n    }else{\r\n        yield put(refeshAIRFailed(data));\r\n    }\r\n    \r\n}\r\n// refesh data air power\r\nfunction* refeshAirPowerSaga(){\r\n    const resp = yield call(getListData,'api/v1/air/getlast5min','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshAIRPOWERSuccess(data));  \r\n    }else{\r\n        yield put(refeshAIRPOWERFailed(data));\r\n    }\r\n    \r\n}\r\n\r\n// refesh data air setting\r\nfunction* refeshAirSettingSaga({payload}){\r\n    const {params} = payload;\r\n    const resp = yield call(updateData,'api/v1/air/setting',params);\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.UPDATED){\r\n        yield put(refeshAIRSETTINGSuccess(data));  \r\n    }else{\r\n        yield put(refeshAIRSETTINGFailed(data));\r\n    }\r\n    \r\n} \r\n\r\n// refesh data air temp trend\r\nfunction* refeshAirTempSaga(){\r\n    const resp = yield call(getListData,'api/v1/air/gettemp5min','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshAIRTEMPSuccess(data));  \r\n    }else{\r\n        yield put(refeshAIRTEMPFailed(data));\r\n    }\r\n} \r\n// refesh data UPS\r\nfunction* refeshUpsSaga(){\r\n    const resp = yield call(getListData,'api/v1/ups/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshUPSSuccess(data));  \r\n    }else{\r\n        yield put(refeshUPSFailed(data));\r\n    }\r\n    \r\n}\r\n// refesh data UPS power\r\nfunction* refeshUpsPowerSaga(){\r\n    const resp = yield call(getListData,'api/v1/ups/getlast15min','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshUPSPOWERSuccess(data));  \r\n    }else{\r\n        yield put(refeshUPSPOWERFailed(data));\r\n    }\r\n    \r\n}\r\n// refesh data pdu\r\nfunction* refeshPduSaga(){\r\n    const resp = yield call(getListData,'api/v1/pdu/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshPDUSuccess(data));  \r\n    }else{\r\n        yield put(refeshPDUFailed(data));\r\n    }\r\n    \r\n}\r\n \r\n// refesh data pdu power\r\nfunction* refeshPduPowerSaga(){\r\n    const resp = yield call(getListData,'api/v1/pdu/gelast5min','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshPDUPOWERSuccess(data));  \r\n    }else{\r\n        yield put(refeshPDUPOWERFailed(data));\r\n    }\r\n    \r\n}\r\n// refesh data leak\r\nfunction* refeshLeakSaga(){\r\n    const resp = yield call(getListData,'api/v1/leak/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshLEAKSuccess(data));  \r\n    }else{\r\n        yield put(refeshLEAKFailed(data));\r\n    }\r\n    \r\n}\r\n// refesh data door\r\nfunction* refeshDoorSaga(){\r\n    const resp = yield call(getListData,'api/v1/door/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshDOORSuccess(data));  \r\n    }else{\r\n        yield put(refeshDOORFailed(data));\r\n    }\r\n}\r\n// refesh data smoke\r\nfunction* refeshSmokeSaga(){\r\n    const resp = yield call(getListData,'api/v1/smoke/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshSMOKESuccess(data));  \r\n    }else{\r\n        yield put(refeshSMOKEFailed(data));\r\n    }\r\n}\r\n// refesh data fan\r\nfunction* refeshFanSaga(){\r\n    const resp = yield call(getListData,'api/v1/fan/getlast','');\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n        yield put(refeshFANSuccess(data));  \r\n    }else{\r\n        yield put(refeshFANFailed(data));\r\n    }\r\n}\r\n//refesh data fan\r\nfunction* controlFanSaga({payload}){\r\n    const resp = yield call(addData,'api/v1/fan/control',payload);\r\n    const {status,data}= resp;\r\n    if(status === STATUS_CODE.SUCCESS){\r\n        yield put(controlFANSuccess(data));  \r\n    }else{\r\n        yield put(controlFANFailed(data));\r\n    }\r\n    \r\n}\r\n\r\n\r\n// refesh data leak\r\nfunction* refeshAllArea(){\r\n    // const resp = yield call(getListData,'api/v1/leak/getlast','');\r\n    // const {status,data}= resp;\r\n    // if(status === STATUS_CODE.SUCCESS && data.lenght !== 0){\r\n    //     yield put(refeshLEAKSuccess(data));  \r\n    // }else{\r\n    //     yield put(refeshLEAKFailed(data));\r\n    // }\r\n    \r\n}\r\nfunction* rootSaga() {\r\n    yield fork(watchFetchListAlarmAction);\r\n    yield fork(watchFetchListUserAction);\r\n    yield takeLatest(alarmTypes.FILTER_ALARM,filterAlarmSaga);\r\n    yield takeLatest(authTypes.AUTH_LOGIN,loginSaga);\r\n    yield takeLatest(authTypes.AUTH_SIGNUP,signupSaga)\r\n    yield takeLatest(authTypes.SET_USER_DELETE,deleteUserSaga)  \r\n    yield takeLatest (authTypes.UPDATE_USER,updateUserSaga)\r\n    yield takeLatest (deviceTypes.REFESH_TEMPHUMI,refeshDataSaga)\r\n    yield takeLatest (deviceTypes.REFESH_PMU,refeshPmuSaga)\r\n    yield takeLatest (deviceTypes.REFESH_AIR,refeshAirSaga)\r\n    yield takeLatest (deviceTypes.REFESH_UPS,refeshUpsSaga)\r\n    yield takeLatest (deviceTypes.REFESH_PDU,refeshPduSaga)\r\n    yield takeLatest (deviceTypes.REFESH_DOOR,refeshDoorSaga)\r\n    yield takeLatest (deviceTypes.REFESH_LEAK,refeshLeakSaga)\r\n    yield takeLatest (deviceTypes.REFESH_SMOKE,refeshSmokeSaga)\r\n    yield takeLatest (deviceTypes.REFESH_FAN,refeshFanSaga)\r\n    yield takeLatest (deviceTypes.CONTROL_FAN,controlFanSaga)\r\n    yield takeLatest (deviceTypes.REFESH_UPSPOWER,refeshUpsPowerSaga)\r\n    yield takeLatest (deviceTypes.REFESH_PDUPOWER,refeshPduPowerSaga)\r\n    yield takeLatest (deviceTypes.REFESH_PMUPOWER,refeshPmuPowerSaga)\r\n    yield takeLatest (deviceTypes.REFESH_AIRPOWER,refeshAirPowerSaga)\r\n    yield takeLatest (deviceTypes.REFESH_AIRSETTING,refeshAirSettingSaga)\r\n    yield takeLatest (deviceTypes.REFESH_AIRTEMP,refeshAirTempSaga)\r\n    yield take\r\n    \r\n}\r\n\r\nexport default rootSaga;"]},"metadata":{},"sourceType":"module"}